"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[185],{52566:function(e,t,o){o.r(t),o.d(t,{default:function(){return q}});var a=o(56768),r=o(45130);const s={class:"p-4 sm:ml-64"},l={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},i=(0,a.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,a.Lk)("th",{class:"text-center"},"Image"),(0,a.Lk)("th",{class:"text-center"},"Status"),(0,a.Lk)("th",{class:"text-center"},"Action")],-1),d={class:"h-[5vh] text-center",elevation:"2"},n={class:"whitespace-nowrap uppercase"},c={class:"whitespace-nowrap uppercase"},g={class:"whitespace-nowrap uppercase"},u={class:"mb-1"},m={id:"AddLogo",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},p={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},h={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},v=(0,a.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Add New Logo </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="AddLogo"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),k={class:"mb-5"},b=(0,a.Lk)("label",{for:"websiteLogo",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Logo",-1),f=["src","onClick"],w=["onClick"],x=(0,a.Lk)("span",{class:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0"}," Remove ",-1),L=[x],y=(0,a.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,a.Lk)("button",{"data-modal-hide":"AddLogo",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Add Logo")],-1),A={id:"preview-modal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 bottom-0 left-0 z-50 flex justify-center items-center"},I={class:"relative p-4 w-full max-w-2xl max-h-full"},C={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},F={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},j=(0,a.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),D=(0,a.Lk)("span",{class:"sr-only"},"Close modal",-1),B=[j,D],S={class:"p-4 md:p-5 space-y-4"},U=["src"];function M(e,t,o,x,j,D){const M=(0,a.g2)("Side"),E=(0,a.g2)("v-icon"),$=(0,a.g2)("v-spacer"),z=(0,a.g2)("Button"),_=(0,a.g2)("v-card-title"),P=(0,a.g2)("v-divider"),W=(0,a.g2)("v-img"),T=(0,a.g2)("v-chip"),K=(0,a.g2)("v-data-table"),R=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(M),(0,a.Lk)("div",s,[(0,a.Lk)("div",l,[(0,a.bF)(R,{class:"bg-orange-200",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{icon:"mdi-hospital-box-outline"}),(0,a.eW)(" Â  Website Logo "),(0,a.bF)($),(0,a.bF)(z,{type:"primary",onClick:D.AddLogo,style:{"background-color":"#ffd666"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Add Logo ")])),_:1},8,["onClick"])])),_:1}),(0,a.bF)(P),(0,a.bF)(K,{search:e.search,"onUpdate:search":t[0]||(t[0]=t=>e.search=t),items:j.items,"items-per-page":5},{headers:(0,a.k6)((({headers:e})=>[i])),item:(0,a.k6)((({item:e})=>[(0,a.Lk)("tr",d,[(0,a.Lk)("td",n,[(0,a.bF)(W,{src:D.getImageUrl(e.image_path),height:"60",class:"my-5",alt:"Image"},null,8,["src"])]),(0,a.Lk)("td",c,[(0,a.bF)(T,{color:1===e.status?"green":"red",text:1===e.status?"Active":"Inactive",class:"text-uppercase",size:"small",label:""},null,8,["color","text"])]),(0,a.Lk)("td",g,[(0,a.Lk)("div",u,[(0,a.bo)((0,a.bF)(z,{type:"primary",class:"px-5",danger:"",onClick:t=>D.deleteLogo(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Delete ")])),_:2},1032,["onClick"]),[[r.aG,0===e.status]])]),(0,a.Lk)("div",null,[(0,a.bo)((0,a.bF)(z,{type:"primary",primary:"",onClick:t=>D.ActivateLogo(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Activate ")])),_:2},1032,["onClick"]),[[r.aG,0===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])]),(0,a.Lk)("div",m,[(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[v,(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>D.insertLogo&&D.insertLogo(...e)),["prevent"])),class:"max-w-sm mx-auto mt-5 ml-10 mb-5"},[(0,a.Lk)("div",k,[b,(0,a.Lk)("input",{type:"file",required:"",id:"websiteLogo",ref:"fileInput",accept:"image/*",multiple:"",onChange:t[1]||(t[1]=(...e)=>D.handleLogoUpload&&D.handleLogoUpload(...e))},null,544)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(D.allImages,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"flex flex-col items-center"},[(0,a.Lk)("img",{src:e.url,onClick:t=>D.previewImage(e),class:"w-full h-full object-cover",style:{"max-width":"100px","max-height":"100px",cursor:"pointer"}},null,8,f),(0,a.Lk)("button",{onClick:e=>D.removeImage(t),class:"mt-1 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-pink-200 dark:focus:ring-pink-800"},L,8,w)])))),128)),y],32)])])]),(0,a.Lk)("div",A,[(0,a.Lk)("div",I,[(0,a.Lk)("div",C,[(0,a.Lk)("div",F,[(0,a.Lk)("button",{"data-modal-hide":"preview-modal",onClick:t[3]||(t[3]=(...e)=>D.closePreviewModal&&D.closePreviewModal(...e)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"},B)]),(0,a.Lk)("div",S,[(0,a.Lk)("img",{src:j.previewedImage.url,class:"w-full h-auto",style:{"max-width":"100%","max-height":"80vh"}},null,8,U)])])])])],64)}o(44114);var E=o(89641),$=o(11595),z=o(88841),_=o(39658),P=o(68820),W=o(55997),T=o(27411);const K=(0,T.dj)();var R={data(){return{items:[],logoImages:[],previewedImage:{}}},components:{Side:P.A,Button:E.A,Upload:$.A},mounted(){(0,z.Tf)({Modal:z.aF,Tooltip:z.m_}),(0,_.Tp)(),this.fetchData()},methods:{AddLogo(){const e=document.getElementById("AddLogo");e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),e.addEventListener("click",(function(t){t.target&&t.target.closest('[data-modal-hide="AddLogo"]')&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}))},deleteLogo(e){W.A.delete(`/api/utility/delete-logos/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{K.success("Logo Deleted"),this.fetchData()})).catch((e=>{K.error("Cant Delete Active Logo"),console.error(e.response.data)}))},ActivateLogo(e){W.A.put(`/api/utility/active-logos/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{K.success("Logo Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?K.error(e.response.data.error):K.error("Can't Activate This Logo"),console.error(e.response?e.response.data:e)}))},fetchData(){W.A.get("/api/utility/get-logos",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data})).catch((e=>{console.error("Error fetching data:",e)}))},insertLogo(){if(1!==this.logoImages.length)return void console.error("Please select one image to upload");let e=new FormData;e.append("image",this.logoImages[0].logoimage),console.log("FormData:",e),W.A.post("/api/utility/add-logos",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.fetchData(),K.success("Uploaded Logo Successfully")})).catch((e=>{console.error("Error uploading logo:",e)}))},getImageUrl(e){return`${W.A.defaults.baseURL}${e}`},handleLogoUpload(e){const t=e.target.files;this.logoImages=[];for(let o=0;o<t.length;o++){const e=t[o];if(!e.type.startsWith("image/")){K.error("Only image files are accepted.");continue}const a=new FileReader;a.onload=t=>{const o=t.target.result,a=e.name,r=a.split(".").pop(),s="logo."+r,l=e.slice(0,e.size,e.type),i=new File([l],s,{type:e.type});this.logoImages.push({url:o,logoimage:i,name:s})},a.readAsDataURL(e);break}},removeImage(e){this.logoImages.splice(e,1)},previewImage(e){e&&e.url?(this.previewedImage=e,document.getElementById("preview-modal").classList.remove("hidden")):console.error("Invalid image object:",e)},closePreviewModal(){this.previewedImage="",document.getElementById("preview-modal").classList.add("hidden")}},computed:{allImages(){return[...this.logoImages]}}},X=o(71241);const G=(0,X.A)(R,[["render",M]]);var q=G}}]);
//# sourceMappingURL=185.2dcf01a7.js.map