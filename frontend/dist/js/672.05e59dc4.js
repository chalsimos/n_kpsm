"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[672],{53491:function(e,t,a){a.d(t,{A:function(){return c}});var r=a(56768),l={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},s=l,i=a(32058);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){d(e,t,a[t])}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=function(e,t){var a=o({},e,t.attrs);return(0,r.bF)(i.A,o({},a,{icon:s}),null)};n.displayName="InboxOutlined",n.inheritAttrs=!1;var c=n},99672:function(e,t,a){a.r(t),a.d(t,{default:function(){return ce}});var r=a(56768),l=a(24232),s=a(45130);const i={class:"p-4 sm:ml-64 flex-grow overflow-y-auto"},o={class:"p-2 border-2 border-orange-200 border-solid rounded-lg dark:border-gray-700 mt-14"},d={class:"text-center whitespace-nowrap"},n={class:"text-center"},c=["checked"],m=(0,r.Lk)("th",{class:"text-center"},"Acronym",-1),u=(0,r.Lk)("th",{class:"text-center"},"Name",-1),g=(0,r.Lk)("th",{class:"text-center"},"Email",-1),h=(0,r.Lk)("th",{class:"text-center"},"Action",-1),p={class:"h-[10vh] text-center"},b={class:"whitespace-nowrap uppercase"},f=["onChange","checked"],k={class:"whitespace-nowrap uppercase"},y={class:"whitespace-nowrap uppercase"},x={class:"whitespace-nowrap uppercase"},v={class:"whitespace-nowrap uppercase"},w={class:"mb-1"},L=["onClick"],E={class:"mb-1"},A={class:"mb-1"},C={id:"emailModal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},I={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},j={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},S=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Send an Email Message </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="emailModal"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),F={class:"my-6 mx-auto max-w-xl bg-white font-[sans-serif]"},B=(0,r.Lk)("h1",{class:"text-3xl text-[#333] font-extrabold text-center"},"Message",-1),M=["value"],D=(0,r.Lk)("input",{type:"text",placeholder:"Subject",id:"subject",class:"w-full rounded-md py-3 px-4 bg-gray-100 text-sm outline-blue-500"},null,-1),$=(0,r.Lk)("textarea",{placeholder:"Message",rows:"6",id:"message",class:"w-full rounded-md px-4 bg-gray-100 text-sm pt-3 outline-blue-500"},null,-1),O=(0,r.Lk)("div",{class:"w-full h-full flex justify-center items-center cursor-pointer"},[(0,r.Lk)("p",{class:"text-sm flex justify-center items-center"}," Click here to input files if need to send single/multiple files ")],-1),U=(0,r.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,r.Lk)("button",{"data-modal-hide":"emailModal",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Send")],-1),_={id:"addEmail",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},z={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},V={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},P=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Add New Hospital </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="addEmail"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),T={class:"mb-5"},q=(0,r.Lk)("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Name",-1),H={class:"mb-5"},N=(0,r.Lk)("label",{for:"acronym",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Acronym",-1),G={class:"mb-5"},W=(0,r.Lk)("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email",-1),J=(0,r.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,r.Lk)("button",{"data-modal-hide":"addEmail",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Add Email")],-1);function K(e,t,a,K,R,X){const Q=(0,r.g2)("Side"),Y=(0,r.g2)("v-icon"),Z=(0,r.g2)("v-spacer"),ee=(0,r.g2)("v-text-field"),te=(0,r.g2)("Button"),ae=(0,r.g2)("v-card-title"),re=(0,r.g2)("v-divider"),le=(0,r.g2)("v-data-table"),se=(0,r.g2)("v-card"),ie=(0,r.g2)("a-upload");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(Q),(0,r.Lk)("div",null,[(0,r.Lk)("div",i,[(0,r.Lk)("div",o,[(0,r.bF)(se,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(ae,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,r.k6)((()=>[(0,r.bF)(Y,{icon:"mdi-hospital-box-outline"}),(0,r.bF)(Z),(0,r.bF)(ee,{modelValue:R.search,"onUpdate:modelValue":t[0]||(t[0]=e=>R.search=e),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"]),(0,r.bF)(te,{type:"primary",onClick:X.addEmail,class:"ml-5",style:{"background-color":"#ffd666"}},{default:(0,r.k6)((()=>[(0,r.eW)(" Add Email ")])),_:1},8,["onClick"])])),_:1}),(0,r.bF)(re),(0,r.bF)(le,{search:R.search,"onUpdate:search":t[2]||(t[2]=e=>R.search=e),items:R.items,"items-per-page":5},{headers:(0,r.k6)((({headers:e})=>[(0,r.Lk)("tr",d,[(0,r.Lk)("th",n,[(0,r.Lk)("input",{onChange:t[1]||(t[1]=(...e)=>X.checkAll&&X.checkAll(...e)),checked:X.isCheckedAll,id:"check-all",type:"checkbox",value:"",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,c)]),m,u,g,h])])),item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",p,[(0,r.Lk)("td",b,[(0,r.Lk)("input",{onChange:t=>X.toggleChecked(e.id),checked:R.checkedIds.includes(e.id),id:"single-check",type:"checkbox",value:"",class:"single-check w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,f)]),(0,r.Lk)("td",k,(0,l.v_)(e.acronym),1),(0,r.Lk)("td",y,(0,l.v_)(e.name),1),(0,r.Lk)("td",x,(0,l.v_)(e.email),1),(0,r.Lk)("td",v,[(0,r.Lk)("div",w,[(0,r.bo)((0,r.Lk)("button",{onClick:t=>X.emailModal(R.checkedIds.length>0?R.checkedIds:e.id),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm mt-1 px-3 py-2 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",type:"button"}," Send Email ",8,L),[[s.aG,"active"===e.status]])]),(0,r.Lk)("div",E,[(0,r.bo)((0,r.bF)(te,{type:"primary",class:"px-5",danger:"",onClick:t=>X.deleteEmail(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Delete ")])),_:2},1032,["onClick"]),[[s.aG,"inactive"===e.status]])]),(0,r.Lk)("div",A,[(0,r.bo)((0,r.bF)(te,{type:"primary",primary:"",onClick:t=>X.ActivateEmail(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Activate ")])),_:2},1032,["onClick"]),[[s.aG,"inactive"===e.status]]),(0,r.bo)((0,r.bF)(te,{type:"primary",primary:"",onClick:t=>X.DectivateEmail(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Deactivate ")])),_:2},1032,["onClick"]),[[s.aG,"active"===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",I,[(0,r.Lk)("div",j,[S,(0,r.Lk)("div",F,[B,(0,r.Lk)("form",{class:"mt-8 space-y-4",onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>X.sendEmail&&X.sendEmail(...e)),["prevent"]))},[(0,r.Lk)("input",{type:"email",value:R.emailList,placeholder:"Email",disabled:"",class:"w-full rounded-md py-3 px-4 bg-gray-100 text-sm outline-blue-500",readonly:""},null,8,M),D,$,(0,r.bF)(ie,{name:"file",fileList:R.fileList,multiple:"",beforeUpload:X.beforeUpload,onChange:X.handleChange,onDrop:X.handleDrop,class:"w-full h-24 flex flex-col justify-center items-center border-dashed border-4 border-gray-400 rounded-lg"},{default:(0,r.k6)((()=>[O])),_:1},8,["fileList","beforeUpload","onChange","onDrop"]),U],32)])])])]),(0,r.Lk)("div",_,[(0,r.Lk)("div",z,[(0,r.Lk)("div",V,[P,(0,r.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>X.insertEmail&&X.insertEmail(...e)),["prevent"])),class:"w-full px-4 py-6 sm:px-6 sm:py-8 lg:px-8 lg:py-10"},[(0,r.Lk)("div",T,[q,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>R.name=e),type:"text",id:"name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Name",required:""},null,512),[[s.Jo,R.name]])]),(0,r.Lk)("div",H,[N,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>R.acronym=e),type:"text",id:"acronym",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Acronym",required:""},null,512),[[s.Jo,R.acronym]])]),(0,r.Lk)("div",G,[W,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>R.email=e),type:"text",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Email",required:""},null,512),[[s.Jo,R.email]])]),J],32)])])])],64)}a(44114);var R=a(89641),X=a(11595),Q=a(29966),Y=a(48392),Z=a(91328),ee=a(88841),te=a(53491),ae=a(39658),re=a(43643),le=a(55997),se=a(27411);const ie=(0,se.dj)();var oe={data(){return{search:"",items:[],checkedIds:[],emailList:"",name:"",acronym:"",email:"",fileList:[],contentStyle:{margin:0,height:"160px",color:"#fff",lineHeight:"160px",textAlign:"center",background:"#364d79"}}},components:{Button:R.A,Upload:X.A,Side:re.A,Carousel:Q.A,ConfigProvider:Y.Ay,Popover:Z.A,InboxOutlined:te.A},mounted(){(0,ee.Tf)({Modal:ee.aF,Tooltip:ee.m_}),(0,ae.Tp)(),this.fetchEmail()},methods:{beforeUpload(e){return!1},handleChange(e){let t=[...e.fileList];this.fileList=t},handleDrop(e){console.log("Dropped files",e.dataTransfer.files)},sendEmail(){const e=this.itemId;e instanceof Event?console.error("Invalid itemId:",e):Array.isArray(e)?e.forEach((e=>{this.sendEmailRequest(e)})):this.sendEmailRequest(e)},async sendEmailRequest(e){const t=document.getElementById("subject").value,a=document.getElementById("message").value,r=new FormData;r.append("subject",t),r.append("message",a),this.fileList.forEach(((e,t)=>{r.append(`files[${t}]`,e.originFileObj)}));try{await le.A.post(`/api/utility/send-emails/${e}`,r,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"multipart/form-data"}});ie.success("Email Sent!"),this.checkedIds=[],document.getElementById("subject").value="",document.getElementById("message").value=""}catch(l){console.error("Error sending email:",l)}},emailModal(e){this.itemId=e;let t=[];if(Array.isArray(e))e.forEach((e=>{const a=this.items.find((t=>t.id===e));a&&t.push(a.email)}));else{const a=this.items.find((t=>t.id===e));a&&t.push(a.email)}this.emailList=t.join(", ");const a=document.getElementById("emailModal");a.classList.remove("hidden"),a.setAttribute("aria-hidden","false"),a.addEventListener("click",(function(e){e.target&&e.target.closest('[data-modal-hide="emailModal"]')&&(a.classList.add("hidden"),a.setAttribute("aria-hidden","true"))}))},deleteEmail(e){le.A.delete(`/api/utility/delete-emails/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{ie.success("Email Deleted"),this.fetchEmail()})).catch((e=>{ie.error("Cant Delete Active Email"),console.error(e.response.data)}))},ActivateEmail(e){le.A.put(`/api/utility/active-emails/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{ie.success("Email Updated"),this.fetchEmail()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?ie.error(e.response.data.error):ie.error("Can't Activate This Email"),console.error(e.response?e.response.data:e)}))},DectivateEmail(e){le.A.put(`/api/utility/deactive-emails/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{ie.success("Email Updated"),this.fetchEmail()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?ie.error(e.response.data.error):ie.error("Can't Activate This Email"),console.error(e.response?e.response.data:e)}))},insertEmail(){const e=new FormData;e.append("name",this.name),e.append("acronym",this.acronym),e.append("email",this.email),le.A.post("/api/utility/create-emails",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.name="",this.acronym="",this.email="",ie.success("Email Save Successfully"),this.fetchEmail()})).catch((e=>{console.error(e.response.data),ie.error(e.response.data)}))},addEmail(){const e=document.getElementById("addEmail");e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),e.addEventListener("click",(function(t){t.target&&t.target.closest('[data-modal-hide="addEmail"]')&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}))},fetchEmail(){le.A.get("/api/utility/get-emails",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data})).catch((e=>{console.error("Error fetching medical requests:",e)}))},checkAll(e){const t=e.target.checked;this.checkedIds=t?this.items.map((e=>e.id)):[],this.$nextTick((()=>{document.getElementById("check-all").checked=t}))},toggleChecked(e){this.checkedIds.includes(e)?this.checkedIds=this.checkedIds.filter((t=>t!==e)):this.checkedIds.push(e)}},computed:{isCheckedAll(){return this.checkedIds.length===this.items.length&&this.checkedIds.length>0}}},de=a(71241);const ne=(0,de.A)(oe,[["render",K]]);var ce=ne}}]);
//# sourceMappingURL=672.05e59dc4.js.map