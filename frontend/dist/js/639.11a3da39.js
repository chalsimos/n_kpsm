"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[639],{76639:function(e,t,o){o.r(t),o.d(t,{default:function(){return te}});var a=o(56768),r=o(24232),n=o(45130);const l={class:"p-4 sm:ml-64"},s={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},d=(0,a.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,a.Lk)("th",{class:"text-center"},"Elementary Amount"),(0,a.Lk)("th",{class:"text-center"},"High Amount"),(0,a.Lk)("th",{class:"text-center"},"Senior High Amount"),(0,a.Lk)("th",{class:"text-center"},"College Amount"),(0,a.Lk)("th",{class:"text-center"},"Vocational Amount"),(0,a.Lk)("th",{class:"text-center"},"Status"),(0,a.Lk)("th",{class:"text-center"},"Action")],-1),i={class:"h-[5vh] text-center",elevation:"2"},c={class:"whitespace-nowrap uppercase"},u={class:"whitespace-nowrap uppercase"},h={class:"whitespace-nowrap uppercase"},m={class:"whitespace-nowrap uppercase"},g={class:"whitespace-nowrap uppercase"},p={class:"whitespace-nowrap uppercase"},k={class:"whitespace-nowrap uppercase"},b={class:"mb-1 mt-1"},f={class:"mb-1"},y={id:"AddAmount",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},v={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},x={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},_=(0,a.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Educational Assistance Amount </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="AddAmount"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),w={class:"mb-5"},A=(0,a.Lk)("label",{for:"elementary_amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Elementary Amount",-1),L={class:"mb-5"},S=(0,a.Lk)("label",{for:"high_school_amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"High School Amount",-1),C={class:"mb-5"},D=(0,a.Lk)("label",{for:"senior_high_school_amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Senior High School Amount",-1),I={class:"mb-5"},F=(0,a.Lk)("label",{for:"college_amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"College Amount",-1),j={class:"mb-5"},B=(0,a.Lk)("label",{for:"vocational_amount",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Vocational Amount",-1),E=(0,a.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,a.Lk)("button",{"data-modal-hide":"AddAmount",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Add Amount")],-1),U={id:"preview-modal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 bottom-0 left-0 z-50 flex justify-center items-center"},$={class:"relative p-4 w-full max-w-2xl max-h-full"},z={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},M={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},J=(0,a.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,a.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),V=(0,a.Lk)("span",{class:"sr-only"},"Close modal",-1),P=[J,V],W={class:"p-4 md:p-5 space-y-4"},H=["src"];function N(e,t,o,J,V,N){const O=(0,a.g2)("Side"),T=(0,a.g2)("v-icon"),K=(0,a.g2)("v-spacer"),G=(0,a.g2)("Button"),X=(0,a.g2)("v-card-title"),q=(0,a.g2)("v-divider"),Q=(0,a.g2)("v-chip"),R=(0,a.g2)("v-data-table"),Y=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(O),(0,a.Lk)("div",l,[(0,a.Lk)("div",s,[(0,a.bF)(Y,{class:"bg-orange-200",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(X,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,a.k6)((()=>[(0,a.bF)(T,{icon:"mdi-hospital-box-outline"}),(0,a.eW)(" Â  "),(0,a.bF)(K),(0,a.bF)(G,{type:"primary",onClick:N.AddAmount,style:{"background-color":"#ffd666"}},{default:(0,a.k6)((()=>[(0,a.eW)(" Add Amount ")])),_:1},8,["onClick"])])),_:1}),(0,a.bF)(q),(0,a.bF)(R,{search:e.search,"onUpdate:search":t[0]||(t[0]=t=>e.search=t),items:V.items,"items-per-page":5},{headers:(0,a.k6)((({headers:e})=>[d])),item:(0,a.k6)((({item:e})=>[(0,a.Lk)("tr",i,[(0,a.Lk)("td",c,(0,r.v_)(e.elementary_amount),1),(0,a.Lk)("td",u,(0,r.v_)(e.high_school_amount),1),(0,a.Lk)("td",h,(0,r.v_)(e.senior_high_school_amount),1),(0,a.Lk)("td",m,(0,r.v_)(e.college_amount),1),(0,a.Lk)("td",g,(0,r.v_)(e.vocational_amount),1),(0,a.Lk)("td",p,[(0,a.bF)(Q,{color:"active"===e.status?"green":"red",class:"text-uppercase",size:"small",label:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(e.status),1)])),_:2},1032,["color"])]),(0,a.Lk)("td",k,[(0,a.Lk)("div",b,[(0,a.bo)((0,a.bF)(G,{type:"primary",class:"px-5",danger:"",onClick:t=>N.deleteAmount(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Delete ")])),_:2},1032,["onClick"]),[[n.aG,"inactive"===e.status]])]),(0,a.Lk)("div",f,[(0,a.bo)((0,a.bF)(G,{type:"primary",primary:"",onClick:t=>N.activateAmount(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Activate ")])),_:2},1032,["onClick"]),[[n.aG,"inactive"===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])]),(0,a.Lk)("div",y,[(0,a.Lk)("div",v,[(0,a.Lk)("div",x,[_,(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,n.D$)(((...e)=>N.insertAmount&&N.insertAmount(...e)),["prevent"])),class:"max-w-sm mx-auto mt-5 mb-5"},[(0,a.Lk)("div",w,[A,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"elementary_amount","onUpdate:modelValue":t[1]||(t[1]=e=>V.elementary_amount=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"1000"},null,512),[[n.Jo,V.elementary_amount]])]),(0,a.Lk)("div",L,[S,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"high_school_amount","onUpdate:modelValue":t[2]||(t[2]=e=>V.high_school_amount=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"1000"},null,512),[[n.Jo,V.high_school_amount]])]),(0,a.Lk)("div",C,[D,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"senior_high_school_amount","onUpdate:modelValue":t[3]||(t[3]=e=>V.senior_high_school_amount=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"1000"},null,512),[[n.Jo,V.senior_high_school_amount]])]),(0,a.Lk)("div",I,[F,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"college_amount","onUpdate:modelValue":t[4]||(t[4]=e=>V.college_amount=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"1000"},null,512),[[n.Jo,V.college_amount]])]),(0,a.Lk)("div",j,[B,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"vocational_amount","onUpdate:modelValue":t[5]||(t[5]=e=>V.vocational_amount=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"1000"},null,512),[[n.Jo,V.vocational_amount]])]),E],32)])])]),(0,a.Lk)("div",U,[(0,a.Lk)("div",$,[(0,a.Lk)("div",z,[(0,a.Lk)("div",M,[(0,a.Lk)("button",{"data-modal-hide":"preview-modal",onClick:t[7]||(t[7]=(...t)=>e.closePreviewModal&&e.closePreviewModal(...t)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"},P)]),(0,a.Lk)("div",W,[(0,a.Lk)("img",{src:V.previewedImage.url,class:"w-full h-auto",style:{"max-width":"100%","max-height":"80vh"}},null,8,H)])])])])],64)}o(44114);var O=o(89641),T=o(11595),K=o(88841),G=o(39658),X=o(43643),q=o(55997),Q=o(27411);const R=(0,Q.dj)();var Y={data(){return{items:[],logoImages:[],previewedImage:{},elementary_amount:"",high_school_amount:"",senior_high_school_amount:"",college_amount:"",vocational_amount:""}},components:{Side:X.A,Button:O.A,Upload:T.A},mounted(){(0,K.Tf)({Modal:K.aF,Tooltip:K.m_}),(0,G.Tp)(),this.fetchData(),setInterval(this.sendStoredData,5e3)},methods:{async checkInternetConnection(){if(!navigator.onLine)return!1;try{return await fetch("https://www.google.com",{mode:"no-cors"}),!0}catch(e){return!1}},insertAmount(){const e={elementary_amount:this.elementary_amount,high_school_amount:this.high_school_amount,senior_high_school_amount:this.senior_high_school_amount,college_amount:this.college_amount,vocational_amount:this.vocational_amount};if(!Object.values(e).every((e=>null!==e&&void 0!==e&&""!==e)))return R.error("Please fill all the fields!"),void this.AddAmount();this.checkInternetConnection().then((t=>{if(t)q.A.post("/api/utility/school-level-amount",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.fetchData(),R.success("Uploaded Amount Successfully"),this.clearForm()})).catch((e=>{R.error("Error uploading Amount:",e)}));else{const t=JSON.parse(localStorage.getItem("unsentData"))||[];t.push(e),localStorage.setItem("unsentData",JSON.stringify(t)),R.error("No internet connection. Data saved locally and will be sent once connected.")}}))},sendStoredData(){this.checkInternetConnection().then((e=>{if(e){const e=JSON.parse(localStorage.getItem("unsentData"))||[];e.length>0&&(e.forEach((e=>{q.A.post("/api/utility/school-level-amount",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{R.success("Uploaded Amount Successfully"),this.fetchData()})).catch((e=>{R.error("Error uploading Amount:",e)}))})),localStorage.removeItem("unsentData"))}}))},deleteAmount(e){q.A.delete(`/api/utility/school-level-amount-delte/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{R.success("Amount Deleted"),this.fetchData()})).catch((e=>{R.error("Cant Delete Active Amount"),console.error(e.response.data)}))},activateAmount(e){q.A.put(`/api/utility/school-level-amount-change-status/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{R.success("Amount Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?R.error(e.response.data.error):R.error("Can't Activate This Amount"),console.error(e.response?e.response.data:e)}))},AddAmount(){const e=document.getElementById("AddAmount");e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),e.addEventListener("click",(function(t){t.target&&t.target.closest('[data-modal-hide="AddAmount"]')&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}))},deleteLogo(e){q.A.delete(`/api/utility/delete-logos/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{R.success("Logo Deleted"),this.fetchData()})).catch((e=>{R.error("Cant Delete Active Logo"),console.error(e.response.data)}))},fetchData(){q.A.get("/api/utility/get-all-amount",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data})).catch((e=>{console.error("Error fetching data:",e)}))},clearForm(){this.elementary_amount="",this.high_school_amount="",this.senior_high_school_amount="",this.college_amount="",this.vocational_amount=""}},computed:{}},Z=o(71241);const ee=(0,Z.A)(Y,[["render",N]]);var te=ee}}]);
//# sourceMappingURL=639.11a3da39.js.map