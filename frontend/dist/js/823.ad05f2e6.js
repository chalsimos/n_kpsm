"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[823],{87495:function(e,t,r){r.r(t),r.d(t,{default:function(){return Pe}});var a=r(56768),o=r(24232),s=r(45130);const n={class:"flex flex-col min-h-screen"},i={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},d=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Patient Information ",-1),l={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},c={class:"mb-5"},u=(0,a.Lk)("label",{for:"FirstName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"First Name",-1),g={class:"mb-5"},b=(0,a.Lk)("label",{for:"MiddleName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Middle Name",-1),m={class:"mb-5"},h=(0,a.Lk)("label",{for:"LastName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Last Name",-1),p={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},y={class:"mb-5"},k=(0,a.Lk)("label",{for:"Birthday",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Birthday",-1),f={class:"relative max-w-full"},x=(0,a.Lk)("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[(0,a.Lk)("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),v={class:"mb-5"},w=(0,a.Lk)("label",{for:"Age",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Age",-1),L={class:"mb-5"},C=(0,a.Lk)("label",{for:"Gender",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Gender",-1),I=(0,a.Lk)("option",{value:"",disabled:"",selected:""},"Choose Gender",-1),S=(0,a.Lk)("option",{value:"Male"},"Male",-1),D=(0,a.Lk)("option",{value:"Female"},"Female",-1),q=[I,S,D],B={class:"mb-5"},M=(0,a.Lk)("label",{for:"Civil Status",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Civil Status",-1),O=(0,a.Fv)('<option value="" disabled selected>Civil Status</option><option value="Single">Single</option><option value="Married">Married</option><option value="Separated or Divorced">Separated or Divorced</option><option value="Widowed">Widowed</option>',5),E=[O],_={class:"mb-5"},V=(0,a.Lk)("label",{for:"FullName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Benificiary Fullname",-1),R={class:"mb-5"},T=(0,a.Lk)("label",{for:"ContactNumber",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Contact Number",-1),A=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Address ",-1),N={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},P={class:"mb-5"},F=(0,a.Lk)("label",{for:"Province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Province",-1),U=(0,a.Lk)("option",{value:"1752"},"Oriental Mindoro",-1),H=[U],j={class:"mb-5"},J=(0,a.Lk)("label",{for:"Municipality",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Municipality",-1),G=(0,a.Lk)("option",{disabled:"",selected:"",value:""},"Select City",-1),K=["value"],W={class:"mb-5"},X=(0,a.Lk)("label",{for:"Barangay",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Barangay",-1),Y=(0,a.Lk)("option",{disabled:""},"Select Barangay",-1),z=["value"],Z={class:"mb-5"},$=(0,a.Lk)("label",{for:"Sitio",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Sitio",-1),Q=(0,a.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," ID Information ",-1),ee={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},te={class:"mb-5"},re=(0,a.Lk)("label",{for:"IDNO",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"ID Number",-1),ae={class:"mb-5"},oe=(0,a.Lk)("label",{for:"TypeOfRequest",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Type of ID",-1),se=(0,a.Fv)('<option value="" disabled selected>Choose Type of ID</option><option value="LABORATORY">Pag-Ibig</option><option value="HOSPITAL BILL">Postal</option><option value="CHEMOTHERAPY">Driver&#39;s License</option><option value="ENDOSCOPY">Philhealth</option><option value="CT-SCAN">Passport ID</option><option value="2D ECHO">Umid ID</option><option value="OTHERS">Others</option>',8),ne=[se],ie={key:0,class:"mb-4"},de=(0,a.Lk)("label",{for:"OtherRequest",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Other Type of ID",-1),le=["disabled"],ce=(0,a.Lk)("div",{class:"flex justify-end"},[(0,a.Lk)("button",{type:"submit",class:"text-white bg-orange-900 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 font-medium rounded-lg text-sm w-full py-2.5 text-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800 lg:w-40 lg:ml-auto"}," Submit ")],-1),ue={id:"static-modal","data-modal-backdrop":"static",tabindex:"-1","aria-hidden":"true",class:"overflow-y-auto overflow-x-hidden fixed top-0 right-0 bottom-0 left-0 z-50 flex justify-center items-center"},ge={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},be={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},me=(0,a.Lk)("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},[(0,a.Lk)("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Tupad Code ")],-1),he=(0,a.Lk)("label",{for:"Code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Input Code",-1),pe={class:"flex items-center mt-4"},ye=(0,a.Lk)("label",{for:"status-checker",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},"Check Your Request Status",-1),ke=(0,a.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,a.Lk)("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Submit")],-1);function fe(e,t,r,I,S,D){const O=(0,a.g2)("Head"),U=(0,a.g2)("Foot");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",n,[(0,a.bF)(O),(0,a.Lk)("div",{class:(0,o.C4)(["flex-grow p-4 mt-[5vh]",{blur:S.showModal}])},[(0,a.Lk)("div",i,[d,(0,a.Lk)("form",{onSubmit:t[22]||(t[22]=(0,s.D$)(((...e)=>D.saveToDatabase&&D.saveToDatabase(...e)),["prevent"])),class:"max-w-full mx-auto w-full ml-0"},[(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[u,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>S.firstname=e),type:"text",id:"FirstName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Juan",required:""},null,512),[[s.Jo,S.firstname]])]),(0,a.Lk)("div",g,[b,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>S.middlename=e),type:"text",id:"MiddleName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Martinez",required:""},null,512),[[s.Jo,S.middlename]])]),(0,a.Lk)("div",m,[h,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>S.lastname=e),type:"text",id:"LastName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Dela Cruz",required:""},null,512),[[s.Jo,S.lastname]])])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",y,[k,(0,a.Lk)("div",f,[x,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>S.birthday=e),onInput:t[4]||(t[4]=(...e)=>D.calculateAge&&D.calculateAge(...e)),id:"Birthday",type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Select date"},null,544),[[s.Jo,S.birthday]])])]),(0,a.Lk)("div",v,[w,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>S.age=e),readonly:"",type:"number",id:"Age",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},null,512),[[s.Jo,S.age]])]),(0,a.Lk)("div",L,[C,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>S.gender=e),id:"Gender",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 w-full font-small rounded-lg text-sm py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},q,512),[[s.u1,S.gender]])]),(0,a.Lk)("div",B,[M,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>S.civil_status=e),id:"Civil Status",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 w-full font-small rounded-lg text-sm py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},E,512),[[s.u1,S.civil_status]])]),(0,a.Lk)("div",_,[V,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>S.benificiaryfullname=e),type:"text",id:"FullName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Juan M. Dela Cruz",required:""},null,512),[[s.Jo,S.benificiaryfullname]])]),(0,a.Lk)("div",R,[T,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>S.contactnumber=e),type:"number",id:"ContactNumber",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"09123456789",required:""},null,512),[[s.Jo,S.contactnumber]])])]),A,(0,a.Lk)("div",N,[(0,a.Lk)("div",P,[F,(0,a.bo)((0,a.Lk)("select",{onChange:t[10]||(t[10]=(...t)=>e.handleCity&&e.handleCity(...t)),id:"Province","onUpdate:modelValue":t[11]||(t[11]=e=>S.provinceto=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},H,544),[[s.u1,S.provinceto]])]),(0,a.Lk)("div",j,[J,(0,a.bo)((0,a.Lk)("select",{onChange:t[12]||(t[12]=(...e)=>D.handleBarangay&&D.handleBarangay(...e)),id:"Municipality","onUpdate:modelValue":t[13]||(t[13]=e=>S.municipality=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[G,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(S.cities,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.city_code,key:e.city_code},(0,o.v_)(e.city_name),9,K)))),128))],544),[[s.u1,S.municipality]])]),(0,a.bo)((0,a.Lk)("input",{type:"hidden","onUpdate:modelValue":t[14]||(t[14]=e=>S.selectedMunicipality=e),id:"SelectedMunicipality",readonly:""},null,512),[[s.Jo,S.selectedMunicipality]]),(0,a.bo)((0,a.Lk)("input",{type:"hidden","onUpdate:modelValue":t[15]||(t[15]=e=>S.selectedBarangay=e),id:"SelectedBarangay",readonly:""},null,512),[[s.Jo,S.selectedBarangay]]),(0,a.Lk)("div",W,[X,(0,a.bo)((0,a.Lk)("select",{id:"Barangay","onUpdate:modelValue":t[16]||(t[16]=e=>S.barangay=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[Y,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(S.barangays,(e=>((0,a.uX)(),(0,a.CE)("option",{value:e.brgy_code,key:e.brgy_code},(0,o.v_)(e.brgy_name),9,z)))),128))],512),[[s.u1,S.barangay]])]),(0,a.Lk)("div",Z,[$,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>S.sitio=e),type:"text",id:"Sitio",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Sitio",required:""},null,512),[[s.Jo,S.sitio]])])]),Q,(0,a.Lk)("div",ee,[(0,a.Lk)("div",te,[re,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>S.idNum=e),type:"text",id:"IDNO",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Heart Disease",required:""},null,512),[[s.Jo,S.idNum]])]),(0,a.Lk)("div",ae,[oe,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[19]||(t[19]=e=>S.typeOfRequest=e),onChange:t[20]||(t[20]=(...e)=>D.handleTypeOfRequestChange&&D.handleTypeOfRequestChange(...e)),id:"TypeOfRequest",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 font-small rounded-lg text-sm w-full py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},ne,544),[[s.u1,S.typeOfRequest]])]),"OTHERS"===S.typeOfRequest?((0,a.uX)(),(0,a.CE)("div",ie,[de,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>S.otherRequestValue=e),type:"text",id:"OtherRequest",disabled:D.isOtherRequestDisabled,class:"bg-orange-300 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full mt-2 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"SSS",required:""},null,8,le),[[s.Jo,S.otherRequestValue]])])):(0,a.Q3)("",!0)]),ce],32)])],2),(0,a.Lk)("div",null,[(0,a.bF)(U)])]),(0,a.Lk)("div",ue,[(0,a.Lk)("div",ge,[(0,a.Lk)("div",be,[me,(0,a.Lk)("form",{onSubmit:t[26]||(t[26]=(0,s.D$)(((...e)=>D.submitForm&&D.submitForm(...e)),["prevent"])),class:"max-w-sm mx-auto mt-5 mb-5"},[he,(0,a.bo)((0,a.Lk)("input",{required:"","onUpdate:modelValue":t[23]||(t[23]=e=>S.accessCode=e),type:"text",id:"Code","aria-describedby":"helper-text-explanation",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Code Here"},null,512),[[s.Jo,S.accessCode]]),(0,a.Lk)("div",pe,[(0,a.bo)((0,a.Lk)("input",{id:"status-checker",type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=e=>S.statusChecked=e),onChange:t[25]||(t[25]=(...t)=>e.handleStatusChange&&e.handleStatusChange(...t)),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,544),[[s.lH,S.statusChecked]]),ye]),ke],32)])])])],64)}var xe=r(39658),ve=r(75093),we=r(27411),Le=r(80259),Ce=r(92689),Ie=r(89029),Se=r.n(Ie),De=r(55997),qe=r(54837);const Be="TupadDB",Me="requests",Oe=async()=>{const e=await(0,qe.P2)(Be,1,{upgrade(e){e.objectStoreNames.contains(Me)||e.createObjectStore(Me,{keyPath:"id",autoIncrement:!0})}});return e},Ee=async e=>{const t=await Oe();await t.put(Me,e)},_e=async()=>{const e=await Oe();return await e.getAll(Me)},Ve=async()=>{const e=await Oe();await e.clear(Me)},Re=(0,we.dj)();var Te={components:{Head:ve.A,Foot:Le.A,SelectPhilippinesAddress:Se()},data(){return{provinces:[],cities:[],barangays:[],provinceto:"1752",municipality:null,barangay:null,typeOfRequest:"",otherRequestValue:"",firstname:"",middlename:"",lastname:"",age:null,birthday:"",gender:"",province:"Oriental Mindoro",benificiaryfullname:"",contactnumber:"",idNum:"",sitio:"",civil_status:"",selectedMunicipality:"",selectedBarangay:"",inputed_code:"",showModal:!0,accessCode:"",accessGranted:!1,statusChecked:!1}},mounted(){(0,Ce.A)("#Birthday",{}),this.fetchCities(),(0,xe.Tp)();const e=localStorage.getItem("accessGranted");"true"===e&&(this.accessGranted=!0,this.showModal=!1,this.hideModal(),document.querySelector(".flex-grow").classList.remove("blur")),setTimeout((()=>{localStorage.removeItem("accessGranted"),localStorage.removeItem("tupad_codeId"),localStorage.removeItem("captain_id")}),6e5),setInterval(this.sendStoredData,5e3)},methods:{submitForm(){this.statusChecked?this.checkStatus():this.submitCode()},checkStatus(){De.A.post("/api/dole/tupad-request-status-checker",{code:this.accessCode}).then((e=>{200===e.status&&(this.accessCode="",this.statusChecked=!1,Re.success(e.data))})).catch((e=>{e.response?404===e.response.status&&(this.accessCode="",this.statusChecked=!1,Re.error("Invalid Tupad code")):(this.accessCode="",this.statusChecked=!1,console.error("Error setting up the request:",e.message),Re.error("An error occurred. Please try again later."))}))},submitCode(){De.A.post("/api/dole/code-checker",{code:this.accessCode}).then((e=>{200===e.status&&(this.accessCode="",this.accessGranted=!0,this.showModal=!1,document.querySelector(".flex-grow").classList.remove("blur"),Re.success("Code Accepted"),localStorage.setItem("tupad_codeId",e.data.encrypted_id.tupad_codeId),localStorage.setItem("captain_id",e.data.encrypted_id.captain_id),localStorage.setItem("accessGranted","true"),this.hideModal())})).catch((e=>{e.response?404===e.response.status?(this.accessCode="",Re.error("Code not found")):400===e.response.status?(this.accessCode="",Re.error("Code is inactive")):(this.accessCode="",Re.error("An error occurred. Please try again later.")):e.request?(this.accessCode="",console.error("No response received:",e.request),Re.error("An error occurred. Please try again later.")):(this.accessCode="",console.error("Error setting up the request:",e.message),Re.error("An error occurred. Please try again later."))}))},hideModal(){document.getElementById("static-modal").classList.add("hidden")},fetchCities(){(0,Ie.cities)(this.provinceto).then((e=>{e&&e.length>0?(this.cities=e,this.municipality=null,this.handleBarangay()):console.error("Empty response received for cities.")})).catch((e=>{console.error("Error fetching cities:",e)}))},handleBarangay(){this.municipality&&(0,Ie.barangays)(this.municipality).then((e=>{this.barangays=e;const t=this.cities.find((e=>e.city_code===this.municipality));this.selectedMunicipality=t?t.city_name:"",this.selectedBarangay=this.barangays.length>0?this.barangays[0].brgy_name:""})).catch((e=>{console.error("Error fetching barangays:",e)}))},handleTypeOfRequestChange(){"OTHERS"!==this.typeOfRequest&&(this.otherRequestValue="")},async checkInternetConnection(){if(!navigator.onLine)return!1;try{return await fetch("https://www.google.com",{mode:"no-cors"}),!0}catch(e){return!1}},async saveToDatabase(){const e=this.birthday.split("/").reverse().join("-"),t={firstname:this.firstname,middlename:this.middlename,lastname:this.lastname,age:this.age,birthday:e,gender:this.gender,province:this.province,municipality:this.selectedMunicipality,barangay:this.selectedBarangay,benificiaryfullname:this.benificiaryfullname,contactnumber:this.contactnumber,civilstatus:this.civil_status,idNum:this.idNum,sitio:this.sitio,idType:"OTHERS"===this.typeOfRequest?this.otherRequestValue:this.typeOfRequest,used_code_id:localStorage.getItem("tupad_codeId"),given_by_captainID:localStorage.getItem("captain_id")},r=await this.checkInternetConnection();r?De.A.post("/api/dole/add-tupad",t).then((e=>{this.clearForm(),Re.success("Tupad Successfully Send"),localStorage.removeItem("accessGranted"),localStorage.removeItem("tupad_codeId"),localStorage.removeItem("captain_id")})).catch((e=>{console.error(e.response.data),Re.error(e.response.data)})):(await Ee(t),Re.warning("No internet connection. Data saved locally and will be sent once connected."))},async sendStoredData(){const e=await this.checkInternetConnection();if(e){const e=await _e();if(e.length>0){for(const r of e)try{await De.A.post("/api/dole/add-tupad",r),this.clearForm(),Re.success("Upload Tupad Request Successfully"),localStorage.removeItem("accessGranted"),localStorage.removeItem("tupad_codeId"),localStorage.removeItem("captain_id")}catch(t){Re.error("Error uploading Tupad Request:",t)}await Ve()}}},clearForm(){this.firstname="",this.middlename="",this.lastname="",this.age=null,this.birthday="",this.gender="",this.province="",this.civil_status="",this.selectedMunicipality="",this.selectedBarangay="",this.benificiaryfullname="",this.contactnumber="",this.idNum="",this.sitio="",this.typeOfRequest=""},calculateAge(){if(!this.birthday)return;const e=new Date,t=new Date(this.birthday);let r=e.getFullYear()-t.getFullYear();const a=e.getMonth()-t.getMonth();(a<0||0===a&&e.getDate()<t.getDate())&&r--,this.age=r}},watch:{barangay(e){const t=this.barangays.find((t=>t.brgy_code===e));this.selectedBarangay=t?t.brgy_name:""}},computed:{isOtherRequestDisabled(){return"OTHERS"!==this.typeOfRequest}}},Ae=r(71241);const Ne=(0,Ae.A)(Te,[["render",fe]]);var Pe=Ne},2325:function(e,t,r){e.exports=r.p+"img/kpms.03052075.png"},54837:function(e,t,r){r.d(t,{P2:function(){return f}});r(64979);const a=(e,t)=>t.some((t=>e instanceof t));let o,s;function n(){return o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i(){return s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d=new WeakMap,l=new WeakMap,c=new WeakMap;function u(e){const t=new Promise(((t,r)=>{const a=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(y(e.result)),a()},s=()=>{r(e.error),a()};e.addEventListener("success",o),e.addEventListener("error",s)}));return c.set(t,e),t}function g(e){if(d.has(e))return;const t=new Promise(((t,r)=>{const a=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),a()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));d.set(e,t)}let b={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return y(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function m(e){b=e(b)}function h(e){return i().includes(e)?function(...t){return e.apply(k(this),t),y(this.request)}:function(...t){return y(e.apply(k(this),t))}}function p(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&g(e),a(e,n())?new Proxy(e,b):e)}function y(e){if(e instanceof IDBRequest)return u(e);if(l.has(e))return l.get(e);const t=p(e);return t!==e&&(l.set(e,t),c.set(t,e)),t}const k=e=>c.get(e);function f(e,t,{blocked:r,upgrade:a,blocking:o,terminated:s}={}){const n=indexedDB.open(e,t),i=y(n);return a&&n.addEventListener("upgradeneeded",(e=>{a(y(n.result),e.oldVersion,e.newVersion,y(n.transaction),e)})),r&&n.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),i.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}const x=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],w=new Map;function L(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const r=t.replace(/FromIndex$/,""),a=t!==r,o=v.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!o&&!x.includes(r))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let n=s.store;return a&&(n=n.index(t.shift())),(await Promise.all([n[r](...t),o&&s.done]))[0]};return w.set(t,s),s}m((e=>({...e,get:(t,r,a)=>L(t,r)||e.get(t,r,a),has:(t,r)=>!!L(t,r)||e.has(t,r)})));const C=["continue","continuePrimaryKey","advance"],I={},S=new WeakMap,D=new WeakMap,q={get(e,t){if(!C.includes(t))return e[t];let r=I[t];return r||(r=I[t]=function(...e){S.set(this,D.get(this)[t](...e))}),r}};async function*B(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const r=new Proxy(t,q);D.set(r,t),c.set(r,k(t));while(t)yield r,t=await(S.get(r)||t.continue()),S.delete(r)}function M(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}m((e=>({...e,get(t,r,a){return M(t,r)?B:e.get(t,r,a)},has(t,r){return M(t,r)||e.has(t,r)}})))}}]);
//# sourceMappingURL=823.ad05f2e6.js.map