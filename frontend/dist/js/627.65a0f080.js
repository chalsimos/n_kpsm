"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[627],{31920:function(e,t,a){a.r(t),a.d(t,{default:function(){return dt}});var r=a(56768),o=a(45130),n=a(24232);const s={class:"flex flex-col min-h-screen"},i={class:"flex-grow p-4 mt-[5vh]"},l={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},d=(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Patient Information ",-1),c={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},g={class:"mb-5"},u=(0,r.Lk)("label",{for:"FirstName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"First Name",-1),m={class:"mb-5"},p=(0,r.Lk)("label",{for:"MiddleName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Middle Name",-1),h={class:"mb-5"},b=(0,r.Lk)("label",{for:"LastName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Last Name",-1),y={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},f={class:"mb-5"},k=(0,r.Lk)("label",{for:"Birthday",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Birthday",-1),v={class:"relative max-w-full"},x=(0,r.Lk)("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[(0,r.Lk)("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[(0,r.Lk)("path",{d:"M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"})])],-1),w={class:"mb-5"},L=(0,r.Lk)("label",{for:"Age",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Age",-1),I={class:"mb-5"},C=(0,r.Lk)("label",{for:"Gender",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Gender",-1),D=(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Choose Gender",-1),q=(0,r.Lk)("option",{value:"Male"},"Male",-1),B=(0,r.Lk)("option",{value:"Female"},"Female",-1),_=[D,q,B],R=(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Address ",-1),E={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},O={class:"mb-5"},M=(0,r.Lk)("label",{for:"Province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Province",-1),F=(0,r.Lk)("option",{value:"1752"},"Oriental Mindoro",-1),U=[F],V={class:"mb-5"},S=(0,r.Lk)("label",{for:"Municipality",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Municipality",-1),A=(0,r.Lk)("option",{disabled:"",selected:"",value:""},"Select City",-1),T=["value"],H={class:"mb-5"},P=(0,r.Lk)("label",{for:"Barangay",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Barangay",-1),j=(0,r.Lk)("option",{disabled:""},"Select Barangay",-1),N=["value"],J=(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Representative Information ",-1),K={class:"grid md:grid-cols-2 md:gap-2 whitespace-nowrap"},X={class:"mb-5"},z=(0,r.Lk)("label",{for:"FullName",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Representative Fullname",-1),$={class:"mb-5"},W=(0,r.Lk)("label",{for:"ContactNumber",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Contact Number",-1),G=(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Request Information ",-1),Z={class:"grid md:grid-cols-3 md:gap-3 whitespace-nowrap"},Y={class:"mb-5"},Q=(0,r.Lk)("label",{for:"Diagnosis",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Diagnosis",-1),ee={class:"mb-5"},te=(0,r.Lk)("label",{for:"Hospital",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Hospital",-1),ae=(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Choose Hospital",-1),re=["value"],oe={class:"mb-5"},ne=(0,r.Lk)("label",{for:"TypeOfRequest",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Type of Request",-1),se=(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Choose Request",-1),ie=["value"],le=(0,r.Lk)("option",{value:"OTHERS"},"Others",-1),de={key:0,class:"mb-4"},ce=(0,r.Lk)("label",{for:"OtherRequest",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Other Type of Request",-1),ge=["disabled"],ue=(0,r.Lk)("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Requirements Upload (Image Only) ",-1),me={class:"grid md:grid-cols-4 md:gap-4 whitespace-nowrap"},pe={class:"mb-5"},he=(0,r.Lk)("label",{for:"brgyClearance",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Upload Brgy. Indigency",-1),be={class:"mb-5"},ye=(0,r.Lk)("label",{for:"validID",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Upload Valid ID",-1),fe={class:"mb-5"},ke=(0,r.Lk)("label",{for:"hospitalDocuments",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Upload Hospital Document",-1),ve=(0,r.Lk)("div",{class:"mb-5"},[(0,r.Lk)("label",{for:"manageImage",class:"block text-sm font-medium text-gray-900 dark:text-white"},"Manage Upload Image"),(0,r.Lk)("button",{id:"manageImage","data-modal-target":"preview-image","data-modal-toggle":"preview-image",class:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," Image Preview ")],-1),xe=(0,r.Lk)("div",{class:"mb-5"},[(0,r.Lk)("span",{class:"text-red-500"},"Please bring the requeirements always.")],-1),we=(0,r.Lk)("div",{class:"flex justify-end"},[(0,r.Lk)("button",{type:"submit",class:"text-white bg-orange-900 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 font-medium rounded-lg text-sm w-full py-2.5 text-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800 lg:w-40 lg:ml-auto"}," Submit ")],-1),Le={id:"preview-image",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0"},Ie={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},Ce={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},De=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="preview-image"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),qe={class:"p-4 md:p-5 space-y-4"},Be={class:"max-h-[60vh] overflow-y-auto"},_e={class:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4"},Re=["src","onClick"],Ee=["onClick"],Oe=(0,r.Lk)("span",{class:"relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0"}," Remove ",-1),Me=[Oe],Fe={id:"preview-modal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 bottom-0 left-0 z-50 flex justify-center items-center"},Ue={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},Ve={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},Se={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},Ae=(0,r.Lk)("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[(0,r.Lk)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Te=(0,r.Lk)("span",{class:"sr-only"},"Close modal",-1),He=[Ae,Te],Pe={class:"p-4 md:p-5 space-y-4"},je=["src"];function Ne(e,t,a,D,q,B){const F=(0,r.g2)("Head"),Oe=(0,r.g2)("Foot");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",s,[(0,r.bF)(F),(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[d,(0,r.Lk)("form",{onSubmit:t[24]||(t[24]=(0,o.D$)(((...e)=>B.saveToDatabase&&B.saveToDatabase(...e)),["prevent"])),class:"max-w-full mx-auto w-full ml-0"},[(0,r.Lk)("div",c,[(0,r.Lk)("div",g,[u,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>q.firstname=e),type:"text",id:"FirstName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Juan",required:""},null,512),[[o.Jo,q.firstname]])]),(0,r.Lk)("div",m,[p,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>q.middlename=e),type:"text",id:"MiddleName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Martinez",required:""},null,512),[[o.Jo,q.middlename]])]),(0,r.Lk)("div",h,[b,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>q.lastname=e),type:"text",id:"LastName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Dela Cruz",required:""},null,512),[[o.Jo,q.lastname]])])]),(0,r.Lk)("div",y,[(0,r.Lk)("div",f,[k,(0,r.Lk)("div",v,[x,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>q.birthday=e),onInput:t[4]||(t[4]=(...e)=>B.calculateAge&&B.calculateAge(...e)),id:"Birthday",type:"text",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Select date"},null,544),[[o.Jo,q.birthday]])])]),(0,r.Lk)("div",w,[L,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>q.age=e),readonly:"",type:"number",id:"Age",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},null,512),[[o.Jo,q.age]])]),(0,r.Lk)("div",I,[C,(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>q.gender=e),id:"Gender",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 w-full font-small rounded-lg text-sm py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},_,512),[[o.u1,q.gender]])])]),R,(0,r.Lk)("div",E,[(0,r.Lk)("div",O,[M,(0,r.bo)((0,r.Lk)("select",{onChange:t[7]||(t[7]=(...t)=>e.handleCity&&e.handleCity(...t)),id:"Province","onUpdate:modelValue":t[8]||(t[8]=e=>q.provinceto=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},U,544),[[o.u1,q.provinceto]])]),(0,r.Lk)("div",V,[S,(0,r.bo)((0,r.Lk)("select",{onChange:t[9]||(t[9]=(...e)=>B.handleBarangay&&B.handleBarangay(...e)),id:"Municipality","onUpdate:modelValue":t[10]||(t[10]=e=>q.municipality=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[A,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(q.cities,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.city_code,key:e.city_code},(0,n.v_)(e.city_name),9,T)))),128))],544),[[o.u1,q.municipality]])]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[11]||(t[11]=e=>q.selectedMunicipality=e),id:"SelectedMunicipality",readonly:""},null,512),[[o.Jo,q.selectedMunicipality]]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[12]||(t[12]=e=>q.selectedBarangay=e),id:"SelectedBarangay",readonly:""},null,512),[[o.Jo,q.selectedBarangay]]),(0,r.Lk)("div",H,[P,(0,r.bo)((0,r.Lk)("select",{id:"Barangay","onUpdate:modelValue":t[13]||(t[13]=e=>q.barangay=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[j,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(q.barangays,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.brgy_code,key:e.brgy_code},(0,n.v_)(e.brgy_name),9,N)))),128))],512),[[o.u1,q.barangay]])])]),J,(0,r.Lk)("div",K,[(0,r.Lk)("div",X,[z,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>q.representativefullname=e),type:"text",id:"FullName",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Juan M. Dela Cruz",required:""},null,512),[[o.Jo,q.representativefullname]])]),(0,r.Lk)("div",$,[W,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>q.contactnumber=e),type:"number",id:"ContactNumber",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"09123456789",required:""},null,512),[[o.Jo,q.contactnumber]])])]),G,(0,r.Lk)("div",Z,[(0,r.Lk)("div",Y,[Q,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>q.diagnosis=e),type:"text",id:"Diagnosis",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Heart Disease",required:""},null,512),[[o.Jo,q.diagnosis]])]),(0,r.Lk)("div",ee,[te,(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[17]||(t[17]=e=>q.hospital=e),id:"Hospital",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 font-small rounded-lg text-sm w-full py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},[ae,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(q.hospitals,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.hospital_acronym},(0,n.v_)(e.hospital_name)+" ("+(0,n.v_)(e.hospital_acronym)+") ",9,re)))),128))],512),[[o.u1,q.hospital]])]),(0,r.Lk)("div",oe,[ne,(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[18]||(t[18]=e=>q.typeOfRequest=e),onChange:t[19]||(t[19]=(...e)=>B.handleTypeOfRequestChange&&B.handleTypeOfRequestChange(...e)),id:"TypeOfRequest",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 font-small rounded-lg text-sm w-full py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},[se,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(q.selectedHospitalOffers,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,n.v_)(e),9,ie)))),128)),le],544),[[o.u1,q.typeOfRequest]])]),"OTHERS"===q.typeOfRequest?((0,r.uX)(),(0,r.CE)("div",de,[ce,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>q.otherRequestValue=e),type:"text",id:"OtherRequest",disabled:B.isOtherRequestDisabled,class:"bg-orange-300 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Laboratory",required:""},null,8,ge),[[o.Jo,q.otherRequestValue]])])):(0,r.Q3)("",!0)]),ue,(0,r.Lk)("div",me,[(0,r.Lk)("div",pe,[he,(0,r.Lk)("input",{type:"file",required:"",id:"brgyClearance",ref:"fileInput",accept:"image/*",multiple:"",onChange:t[21]||(t[21]=(...e)=>B.handleClearanceUpload&&B.handleClearanceUpload(...e))},null,544)]),(0,r.Lk)("div",be,[ye,(0,r.Lk)("input",{type:"file",required:"",id:"validID",ref:"fileInput",accept:"image/*",multiple:"",onChange:t[22]||(t[22]=(...e)=>B.handleIDUpload&&B.handleIDUpload(...e))},null,544)]),(0,r.Lk)("div",fe,[ke,(0,r.Lk)("input",{type:"file",required:"",id:"hospitalDocuments",ref:"fileInput",accept:"image/*",multiple:"",onChange:t[23]||(t[23]=(...e)=>B.handleHospitalUpload&&B.handleHospitalUpload(...e))},null,544)]),ve]),xe,we],32)])]),(0,r.Lk)("div",null,[(0,r.bF)(Oe)])]),(0,r.Lk)("div",Le,[(0,r.Lk)("div",Ie,[(0,r.Lk)("div",Ce,[De,(0,r.Lk)("div",qe,[(0,r.Lk)("div",Be,[(0,r.Lk)("div",_e,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(B.allImages,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"flex flex-col items-center"},[(0,r.Lk)("img",{src:e.url,onClick:t=>B.previewImage(e),class:"w-full h-full object-cover",style:{"max-width":"100px","max-height":"100px",cursor:"pointer"}},null,8,Re),(0,r.Lk)("button",{onClick:e=>B.removeImage(t),class:"mt-1 relative inline-flex items-center justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-pink-500 to-orange-400 group-hover:from-pink-500 group-hover:to-orange-400 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-pink-200 dark:focus:ring-pink-800"},Me,8,Ee)])))),128))])])])])])]),(0,r.Lk)("div",Fe,[(0,r.Lk)("div",Ue,[(0,r.Lk)("div",Ve,[(0,r.Lk)("div",Se,[(0,r.Lk)("button",{"data-modal-hide":"preview-modal",onClick:t[25]||(t[25]=(...e)=>B.closePreviewModal&&B.closePreviewModal(...e)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"},He)]),(0,r.Lk)("div",Pe,[(0,r.Lk)("img",{src:q.previewedImage.url,class:"w-full h-auto",style:{"max-width":"100%","max-height":"80vh"}},null,8,je)])])])])],64)}a(44114),a(16573),a(78100),a(77936),a(37467),a(44732),a(79577),a(64979);var Je=a(39658),Ke=a(75093),Xe=a(27411),ze=a(80259),$e=a(92689),We=a(89029),Ge=a.n(We),Ze=a(55997),Ye=a(54837);const Qe="medicalRequestsDB",et="requests",tt=async()=>{const e=await(0,Ye.P2)(Qe,1,{upgrade(e){e.objectStoreNames.contains(et)||e.createObjectStore(et,{keyPath:"id",autoIncrement:!0})}});return e},at=async e=>{const t=await tt();await t.put(et,e)},rt=async()=>{const e=await tt();return await e.getAll(et)},ot=async()=>{const e=await tt();await e.clear(et)},nt=(0,Xe.dj)();var st={components:{Head:Ke.A,Foot:ze.A,SelectPhilippinesAddress:Ge()},data(){return{provinces:[],cities:[],barangays:[],provinceto:"1752",municipality:null,barangay:null,typeOfRequest:"",otherRequestValue:"",firstname:"",middlename:"",lastname:"",age:null,birthday:"",gender:"",province:"Oriental Mindoro",representativefullname:"",contactnumber:"",diagnosis:"",hospital:"",selectedMunicipality:"",selectedBarangay:"",showCamera:!1,brgy_ClearanceImages:[],valid_IdImages:[],hospital_DocumentImages:[],previewedImage:{},hospitals:[],selectedHospitalOffers:[]}},mounted(){(0,Je.Tp)(),(0,$e.A)("#Birthday",{}),this.fetchCities(),setInterval(this.sendStoredData,5e3),this.fetchHospitals()},methods:{fetchHospitals(){Ze.A.get("/api/medical-requests/get-hospital-and-offer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.hospitals=e.data})).catch((e=>{console.error("Error fetching hospitals:",e)}))},updateSelectedHospitalOffers(e){const t=this.hospitals.find((t=>t.hospital_acronym===e));this.selectedHospitalOffers=t?t.service_offers:[],this.typeOfRequest=""},handleTypeOfRequestChange(){"OTHERS"!==this.typeOfRequest&&(this.otherRequestValue="")},fetchCities(){(0,We.cities)(this.provinceto).then((e=>{e&&e.length>0?(this.cities=e,this.municipality=null,this.handleBarangay()):console.error("Empty response received for cities.")})).catch((e=>{console.error("Error fetching cities:",e)}))},handleBarangay(){this.municipality&&(0,We.barangays)(this.municipality).then((e=>{this.barangays=e;const t=this.cities.find((e=>e.city_code===this.municipality));this.selectedMunicipality=t?t.city_name:"",this.selectedBarangay=this.barangays.length>0?this.barangays[0].brgy_name:""})).catch((e=>{console.error("Error fetching barangays:",e)}))},handleClearanceUpload(e){const t=e.target.files;for(let a=0;a<t.length;a++){const e=t[a];if(!e.type.startsWith("image/")){nt.error("Only image files are accepted.");continue}const r=new FileReader;r.onload=t=>{const a=t.target.result,r=e.name,o=r.split(".").pop(),n="brgy_Clearance."+o,s=e.slice(0,e.size,e.type),i=new File([s],n,{type:e.type});this.brgy_ClearanceImages.push({url:a,brgy_Clearanceimage:i,name:n})},r.readAsDataURL(e)}},handleIDUpload(e){const t=e.target.files;for(let a=0;a<t.length;a++){const e=t[a];if(!e.type.startsWith("image/")){nt.error("Only image files are accepted.");continue}const r=new FileReader;r.onload=t=>{const a=t.target.result,r=e.name,o=r.split(".").pop(),n="valid_id."+o,s=e.slice(0,e.size,e.type),i=new File([s],n,{type:e.type});this.valid_IdImages.push({url:a,valid_IdImagesimage:i,name:n})},r.readAsDataURL(e)}},handleHospitalUpload(e){const t=e.target.files;for(let a=0;a<t.length;a++){const e=t[a];if(!e.type.startsWith("image/")){nt.error("Only image files are accepted.");continue}const r=new FileReader;r.onload=t=>{const a=t.target.result,r=e.name,o=r.split(".").pop(),n="hospital_documents."+o,s=e.slice(0,e.size,e.type),i=new File([s],n,{type:e.type});this.hospital_DocumentImages.push({url:a,hospital_DocumentImagesimage:i,name:n})},r.readAsDataURL(e)}},removeImage(e){this.hospital_DocumentImages.splice(e,1),this.valid_IdImages.splice(e,1),this.brgy_ClearanceImages.splice(e,1)},previewImage(e){e&&e.url?(this.previewedImage=e,document.getElementById("preview-image").classList.add("hidden"),document.getElementById("preview-modal").classList.remove("hidden")):console.error("Invalid image object:",e)},closePreviewModal(){this.previewedImage="",document.getElementById("preview-modal").classList.add("hidden"),document.getElementById("preview-image").classList.remove("hidden")},async checkInternetConnection(){if(!navigator.onLine)return!1;try{return await fetch("https://www.google.com",{mode:"no-cors"}),!0}catch(e){return!1}},fileToBase64(e){return new Promise(((t,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>a(e)}))},base64ToFile(e,t){let a=e.split(","),r=a[0].match(/:(.*?);/)[1],o=atob(a[1]),n=o.length,s=new Uint8Array(n);while(n--)s[n]=o.charCodeAt(n);return new File([s],t,{type:r})},async saveToDatabase(){const e=await Promise.all(this.brgy_ClearanceImages.map((e=>this.fileToBase64(e.brgy_Clearanceimage)))),t=await Promise.all(this.valid_IdImages.map((e=>this.fileToBase64(e.valid_IdImagesimage)))),a=await Promise.all(this.hospital_DocumentImages.map((e=>this.fileToBase64(e.hospital_DocumentImagesimage)))),r=this.birthday.split("/").reverse().join("-"),o="OTHERS"===this.typeOfRequest?this.otherRequestValue:this.typeOfRequest||"",n={firstname:this.firstname,middlename:this.middlename,lastname:this.lastname,age:this.age,birthday:r,gender:this.gender,province:this.province,municipality:this.selectedMunicipality,barangay:this.selectedBarangay,representativefullname:this.representativefullname,contactnumber:this.contactnumber,diagnosis:this.diagnosis,hospital:this.hospital,request:o,brgy_ClearanceImages:e,valid_IdImages:t,hospital_DocumentImages:a},s=await this.checkInternetConnection();if(s){const e=new FormData;Object.keys(n).forEach((t=>{Array.isArray(n[t])?n[t].forEach(((a,r)=>{e.append(`${t}[]`,this.base64ToFile(a,`${t}_${r}.png`))})):e.append(t,n[t])})),Ze.A.post("/api/medical-requests/request",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.clearForm(),nt.success("Medical Request Successfully Sent")})).catch((e=>{console.error("Error in saving request:",e),nt.error("An error occurred while processing your request.")}))}else await at(n),nt.warning("No internet connection. Data saved locally and will be sent once connected.")},sendStoredData(){this.checkInternetConnection().then((async e=>{if(e){const e=await rt();e.length>0&&(e.forEach((e=>{const t=new FormData;Object.keys(e).forEach((a=>{Array.isArray(e[a])?e[a].forEach(((e,r)=>{t.append(`${a}[]`,this.base64ToFile(e,`${a}_${r}.png`))})):t.append(a,e[a])})),Ze.A.post("/api/medical-requests/request",t,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.clearForm(),nt.success("Uploaded Medical Request Successfully")})).catch((e=>{nt.error("Error uploading Medical Request:",e)}))})),await ot())}}))},calculateAge(){if(!this.birthday)return;const e=new Date,t=new Date(this.birthday);let a=e.getFullYear()-t.getFullYear();const r=e.getMonth()-t.getMonth();(r<0||0===r&&e.getDate()<t.getDate())&&a--,this.age=a},clearForm(){this.firstname="",this.middlename="",this.lastname="",this.age=null,this.birthday="",this.gender="",this.province="",this.selectedMunicipality="",this.selectedBarangay="",this.representativefullname="",this.contactnumber="",this.diagnosis="",this.hospital="",this.typeOfRequest="",this.brgy_ClearanceImages=[],this.valid_IdImages=[],this.hospital_DocumentImages=[]}},watch:{barangay(e){const t=this.barangays.find((t=>t.brgy_code===e));this.selectedBarangay=t?t.brgy_name:""},hospital(e){this.updateSelectedHospitalOffers(e),this.typeOfRequest=""}},computed:{isOtherRequestDisabled(){return"OTHERS"!==this.typeOfRequest},allImages(){return[...this.brgy_ClearanceImages,...this.valid_IdImages,...this.hospital_DocumentImages]}}},it=a(71241);const lt=(0,it.A)(st,[["render",Ne]]);var dt=lt},2325:function(e,t,a){e.exports=a.p+"img/kpms.03052075.png"},54837:function(e,t,a){a.d(t,{P2:function(){return k}});a(64979);const r=(e,t)=>t.some((t=>e instanceof t));let o,n;function s(){return o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i(){return n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l=new WeakMap,d=new WeakMap,c=new WeakMap;function g(e){const t=new Promise(((t,a)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",n)},o=()=>{t(y(e.result)),r()},n=()=>{a(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",n)}));return c.set(t,e),t}function u(e){if(l.has(e))return;const t=new Promise(((t,a)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",n),e.removeEventListener("abort",n)},o=()=>{t(),r()},n=()=>{a(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",n),e.addEventListener("abort",n)}));l.set(e,t)}let m={get(e,t,a){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("store"===t)return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return y(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function p(e){m=e(m)}function h(e){return i().includes(e)?function(...t){return e.apply(f(this),t),y(this.request)}:function(...t){return y(e.apply(f(this),t))}}function b(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&u(e),r(e,s())?new Proxy(e,m):e)}function y(e){if(e instanceof IDBRequest)return g(e);if(d.has(e))return d.get(e);const t=b(e);return t!==e&&(d.set(e,t),c.set(t,e)),t}const f=e=>c.get(e);function k(e,t,{blocked:a,upgrade:r,blocking:o,terminated:n}={}){const s=indexedDB.open(e,t),i=y(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(y(s.result),e.oldVersion,e.newVersion,y(s.transaction),e)})),a&&s.addEventListener("blocked",(e=>a(e.oldVersion,e.newVersion,e))),i.then((e=>{n&&e.addEventListener("close",(()=>n())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}const v=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],w=new Map;function L(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const a=t.replace(/FromIndex$/,""),r=t!==a,o=x.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!v.includes(a))return;const n=async function(e,...t){const n=this.transaction(e,o?"readwrite":"readonly");let s=n.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[a](...t),o&&n.done]))[0]};return w.set(t,n),n}p((e=>({...e,get:(t,a,r)=>L(t,a)||e.get(t,a,r),has:(t,a)=>!!L(t,a)||e.has(t,a)})));const I=["continue","continuePrimaryKey","advance"],C={},D=new WeakMap,q=new WeakMap,B={get(e,t){if(!I.includes(t))return e[t];let a=C[t];return a||(a=C[t]=function(...e){D.set(this,q.get(this)[t](...e))}),a}};async function*_(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const a=new Proxy(t,B);q.set(a,t),c.set(a,f(t));while(t)yield a,t=await(D.get(a)||t.continue()),D.delete(a)}function R(e,t){return t===Symbol.asyncIterator&&r(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&r(e,[IDBIndex,IDBObjectStore])}p((e=>({...e,get(t,a,r){return R(t,a)?_:e.get(t,a,r)},has(t,a){return R(t,a)||e.has(t,a)}})))}}]);
//# sourceMappingURL=627.65a0f080.js.map