"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[57],{62057:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});var a=r(56768),s=r(24232),i=r(45130);const o={class:"p-4 sm:ml-64"},d={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},l=(0,a.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,a.Lk)("th",{class:"text-center"},"Hospital Name"),(0,a.Lk)("th",{class:"text-center"},"Address"),(0,a.Lk)("th",{class:"text-center"},"Hospital District"),(0,a.Lk)("th",{class:"text-center"},"Available Service Offer"),(0,a.Lk)("th",{class:"text-center"},"Action")],-1),n={class:"h-[5vh] text-center",elevation:"2"},c={class:"whitespace-nowrap uppercase"},f={class:"whitespace-nowrap uppercase"},h={class:"whitespace-nowrap uppercase"},p={class:"whitespace-normal uppercase"},u={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-2 mb-4"},m={class:"whitespace-nowrap uppercase"},g={class:"mb-1 mt-1"},v={class:"mb-1"},b={id:"ServiceModal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},k={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},x={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},y=(0,a.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Add Service </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="ServiceModal"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),w=(0,a.Lk)("label",{for:"Offer",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Input Service Offer",-1),L=(0,a.Lk)("input",{type:"text",id:"Offer","aria-describedby":"helper-text-explanation",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"CT-Scan"},null,-1),O=(0,a.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,a.Lk)("button",{"data-modal-hide":"ServiceModal",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Approved")],-1),S=[w,L,O],A={id:"modifyOffer",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},_={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},C={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},F=(0,a.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Modify a Service </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="modifyOffer"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),I=(0,a.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,a.Lk)("th",{class:"text-center whitespace-nowrap"},"Service Offer"),(0,a.Lk)("th",{class:"text-center whitespace-nowrap"},"Status"),(0,a.Lk)("th",{class:"text-center whitespace-nowrap"},"Action")],-1),M={class:"h-[2vh]"},B={class:"whitespace-nowrap text-center"},$={class:"whitespace-nowrap text-center"},j={class:"whitespace-nowrap text-center"},E={class:"mb-1 mt-1"},z={class:"mb-1 mt-1"},D={class:"mb-1"};function T(e,t,r,w,L,O){const T=(0,a.g2)("Side"),W=(0,a.g2)("v-icon"),H=(0,a.g2)("v-spacer"),G=(0,a.g2)("v-card-title"),U=(0,a.g2)("v-divider"),K=(0,a.g2)("Button"),P=(0,a.g2)("v-data-table"),X=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(T),(0,a.Lk)("div",o,[(0,a.Lk)("div",d,[(0,a.bF)(X,{class:"bg-orange-200",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(G,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{icon:"mdi-hospital-box-outline"}),(0,a.eW)("   Manage Hospitals Offer "),(0,a.bF)(H)])),_:1}),(0,a.bF)(U),(0,a.bF)(P,{search:e.search,"onUpdate:search":t[0]||(t[0]=t=>e.search=t),items:L.items,"items-per-page":5},{headers:(0,a.k6)((({headers:e})=>[l])),item:(0,a.k6)((({item:e})=>[(0,a.Lk)("tr",n,[(0,a.Lk)("td",c,(0,s.v_)(e.hospital_name+" ("+e.hospital_acronym+")"),1),(0,a.Lk)("td",f,(0,s.v_)(e.hospital_address),1),(0,a.Lk)("td",h,(0,s.v_)(e.hospital_district),1),(0,a.Lk)("td",p,[(0,a.Lk)("div",u,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.offer,((t,r)=>((0,a.uX)(),(0,a.CE)("span",{class:"inline-flex items-center justify-center px-2 py-1 rounded-full text-xs font-medium bg-blue-400 text-white",style:(0,s.Tr)(O.offerStyle(e.offer))},(0,s.v_)(t),5)))),256))])]),(0,a.Lk)("td",m,[(0,a.Lk)("div",g,[(0,a.bo)((0,a.bF)(K,{type:"primary",class:"px-7",danger:"",onClick:t=>O.ServiceModal(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Add Service ")])),_:2},1032,["onClick"]),[[i.aG,"inactive"===e.status]])]),(0,a.Lk)("div",v,[(0,a.bo)((0,a.bF)(K,{type:"primary",primary:"",onClick:t=>O.modifyOffer(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Modify Service ")])),_:2},1032,["onClick"]),[[i.aG,"inactive"===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])]),(0,a.Lk)("div",b,[(0,a.Lk)("div",k,[(0,a.Lk)("div",x,[y,(0,a.Lk)("form",{onSubmit:t[1]||(t[1]=(0,i.D$)(((...e)=>O.addService&&O.addService(...e)),["prevent"])),class:"max-w-sm mx-auto ml-10 mt-5 mb-5"},S,32)])])]),(0,a.Lk)("div",A,[(0,a.Lk)("div",_,[(0,a.Lk)("div",C,[F,(0,a.bF)(X,{flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(G,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{icon:"mdi-hospital-box-outline"}),(0,a.eW)("   Manage Hospitals Offer "),(0,a.bF)(H)])),_:1}),(0,a.bF)(U),(0,a.bF)(P,{items:L.offers,"items-per-page":5},{headers:(0,a.k6)((({headers:e})=>[I])),item:(0,a.k6)((({item:e})=>[(0,a.Lk)("tr",M,[(0,a.Lk)("td",B,(0,s.v_)(e.service_offer),1),(0,a.Lk)("td",$,(0,s.v_)(e.status),1),(0,a.Lk)("td",j,[(0,a.Lk)("div",E,[(0,a.bo)((0,a.bF)(K,{onClick:t=>O.activateOffer(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Activate ")])),_:2},1032,["onClick"]),[[i.aG,"inactive"===e.status]])]),(0,a.Lk)("div",z,[(0,a.bo)((0,a.bF)(K,{type:"primary",class:"px-7",onClick:t=>O.inactiveOffer(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Inactive ")])),_:2},1032,["onClick"]),[[i.aG,"active"===e.status]])]),(0,a.Lk)("div",D,[(0,a.bo)((0,a.bF)(K,{type:"primary",primary:"",danger:"",onClick:t=>O.deleteOffer(e.id)},{default:(0,a.k6)((()=>[(0,a.eW)(" Delete Offer ")])),_:2},1032,["onClick"]),[[i.aG,"inactive"===e.status]])])])])])),_:1},8,["items"])])),_:1})])])])],64)}var W=r(89641),H=r(11595),G=r(88841),U=r(39658),K=r(5040),P=r(55997),X=r(27411);const N=(0,X.dj)();var q={data(){return{items:[],offers:[]}},components:{Side:K.A,Button:W.A,Upload:H.A},mounted(){(0,G.Tf)({Modal:G.aF,Tooltip:G.m_}),(0,U.Tp)(),this.fetchData(),this.fetchOffer(this.itemId)},methods:{ServiceModal(e){this.itemId=e;const t=document.getElementById("ServiceModal");t.classList.remove("hidden"),t.setAttribute("aria-hidden","false"),t.addEventListener("click",(function(e){e.target&&e.target.closest('[data-modal-hide="ServiceModal"]')&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"))}))},addService(){const e=this.itemId,t=document.getElementById("Offer").value;P.A.post(`/api/utility/create-hospital-offer/${e}`,{service_offer:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{document.getElementById("Offer").value="",N.success("Offer Successfully Created"),this.fetchData()})).catch((e=>{console.error(e.response.data),N.error("Please input the offer value.")}))},modifyOffer(e){this.itemId=e;const t=document.getElementById("modifyOffer");t.classList.remove("hidden"),t.setAttribute("aria-hidden","false"),this.fetchOffer(e),t.addEventListener("click",(function(e){e.target&&e.target.closest('[data-modal-hide="modifyOffer"]')&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"))}))},fetchOffer(e){P.A.get(`/api/utility/get-hospital-service-offer/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.offers=e.data.service_offers,console.log(e.data.service_offers)})).catch((e=>{console.error(e.response.data)}))},deleteService(){P.A.put(`/api/utility/active-hospital/${id}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{N.success("Hospital Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?N.error(e.response.data.error):N.error("Can't Activate This Hospital"),console.error(e.response?e.response.data:e)}))},fetchData(){P.A.get("/api/utility/get-hospital-with-offer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data.map((e=>({...e,offer:e.service_offers})))})).catch((e=>{console.error("Error fetching data:",e)}))},offerStyle(e){let t=0;for(let a=0;a<e.length;a++)e[a].length>t&&(t=e[a].length);let r=10*t;return{width:`${r}px`}},inactiveOffer(e){P.A.put(`/api/utility/deactivate-offer/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{N.success("Offer Updated"),this.fetchOffer(this.itemId)})).catch((e=>{e.response&&e.response.data&&e.response.data.error?N.error(e.response.data.error):N.error("Can't Activate This Offer"),console.error(e.response?e.response.data:e)}))},activateOffer(e){P.A.put(`/api/utility/active-offer/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{N.success("Offer Updated"),this.fetchOffer(this.itemId)})).catch((e=>{e.response&&e.response.data&&e.response.data.error?N.error(e.response.data.error):N.error("Can't Activate This Offer"),console.error(e.response?e.response.data:e)}))},deleteOffer(e){P.A.delete(`/api/utility/delete-offer/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{N.success("Offer Deleted"),this.fetchOffer(this.itemId)})).catch((e=>{N.error("Cant Delete Active Offer"),console.error(e.response.data)}))}},computed:{},watch:{}},J=r(71241);const Q=(0,J.A)(q,[["render",T]]);var R=Q}}]);
//# sourceMappingURL=57.e9e93eed.js.map