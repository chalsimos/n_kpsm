"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[51],{79051:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});var r=a(56768),s=a(24232),o=a(45130);const i={class:"p-4 sm:ml-64"},l={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},d=(0,r.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,r.Lk)("th",{class:"text-center"},"Hospital Name"),(0,r.Lk)("th",{class:"text-center"},"Acronym"),(0,r.Lk)("th",{class:"text-center"},"Status"),(0,r.Lk)("th",{class:"text-center"},"Address"),(0,r.Lk)("th",{class:"text-center"},"Action")],-1),n={class:"h-[5vh] text-center",elevation:"2"},c={class:"whitespace-nowrap uppercase"},p={class:"whitespace-nowrap uppercase"},g={class:"whitespace-nowrap uppercase"},h={class:"whitespace-nowrap uppercase"},u={class:"whitespace-nowrap uppercase"},b={class:"mb-1 mt-1"},y={class:"mb-1"},m={class:"mb-1"},k={id:"AddHospital",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},f={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},v={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},x=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Add New Hospital </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="AddHospital"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),w={class:"mb-5"},_=(0,r.Lk)("label",{for:"hospital_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Hospital Name",-1),L={class:"mb-5"},A=(0,r.Lk)("label",{for:"hospital_acronym",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Acronym",-1),H={class:"mb-5"},C=(0,r.Lk)("label",{for:"hospital_district",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"hospital_district",-1),B=(0,r.Lk)("option",{value:"",disabled:"",selected:""},"Hospital District",-1),D=(0,r.Lk)("option",{value:"1st District"},"1st District",-1),F=(0,r.Lk)("option",{value:"2nd District"},"2nd District",-1),S=[B,D,F],M={class:"mb-5"},U=(0,r.Lk)("label",{for:"Province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Province",-1),$=(0,r.Lk)("option",{value:"1752"},"Oriental Mindoro",-1),E=[$],I={class:"mb-5"},V=(0,r.Lk)("label",{for:"Municipality",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Municipality",-1),z=(0,r.Lk)("option",{disabled:"",selected:"",value:""},"Select City",-1),j=["value"],q={class:"mb-5"},P=(0,r.Lk)("label",{for:"Barangay",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Barangay",-1),K=(0,r.Lk)("option",{disabled:""},"Select Barangay",-1),T=["value"],W=(0,r.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,r.Lk)("button",{"data-modal-hide":"AddHospital",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Add Logo")],-1);function X(e,t,a,B,D,F){const $=(0,r.g2)("Side"),X=(0,r.g2)("v-icon"),J=(0,r.g2)("v-spacer"),N=(0,r.g2)("Button"),G=(0,r.g2)("v-card-title"),O=(0,r.g2)("v-divider"),R=(0,r.g2)("v-chip"),Q=(0,r.g2)("v-data-table"),Y=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)($),(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[(0,r.bF)(Y,{class:"bg-orange-200",flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(G,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,r.k6)((()=>[(0,r.bF)(X,{icon:"mdi-hospital-box-outline"}),(0,r.eW)(" Â  "),(0,r.bF)(J),(0,r.bF)(N,{type:"primary",onClick:F.AddHospital,style:{"background-color":"#ffd666"}},{default:(0,r.k6)((()=>[(0,r.eW)(" Add Hospital ")])),_:1},8,["onClick"])])),_:1}),(0,r.bF)(O),(0,r.bF)(Q,{search:e.search,"onUpdate:search":t[0]||(t[0]=t=>e.search=t),items:D.items,"items-per-page":5},{headers:(0,r.k6)((({headers:e})=>[d])),item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",n,[(0,r.Lk)("td",c,(0,s.v_)(e.hospital_name),1),(0,r.Lk)("td",p,(0,s.v_)(e.hospital_acronym),1),(0,r.Lk)("td",g,[(0,r.bF)(R,{color:"active"===e.status?"green":"red",text:"active"===e.status?"Active":"Inactive",class:"text-uppercase",size:"small",label:""},null,8,["color","text"])]),(0,r.Lk)("td",h,(0,s.v_)(e.hospital_address),1),(0,r.Lk)("td",u,[(0,r.Lk)("div",b,[(0,r.bo)((0,r.bF)(N,{type:"primary",class:"px-5",danger:"",onClick:t=>F.deleteHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Delete ")])),_:2},1032,["onClick"]),[[o.aG,"inactive"===e.status]])]),(0,r.Lk)("div",y,[(0,r.bo)((0,r.bF)(N,{type:"primary",primary:"",onClick:t=>F.ActivateHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Activate ")])),_:2},1032,["onClick"]),[[o.aG,"inactive"===e.status]])]),(0,r.Lk)("div",m,[(0,r.bo)((0,r.bF)(N,{onClick:t=>F.DeactivateHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Deactivate ")])),_:2},1032,["onClick"]),[[o.aG,"active"===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])]),(0,r.Lk)("div",k,[(0,r.Lk)("div",f,[(0,r.Lk)("div",v,[x,(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,o.D$)(((...e)=>F.insertHospital&&F.insertHospital(...e)),["prevent"])),class:"w-full px-4 py-6 sm:px-6 sm:py-8 lg:px-8 lg:py-10"},[(0,r.Lk)("div",w,[_,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>D.hospital_name=e),type:"text",id:"hospital_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Hospital Name",required:""},null,512),[[o.Jo,D.hospital_name]])]),(0,r.Lk)("div",L,[A,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>D.hospital_acronym=e),type:"text",id:"hospital_acronym",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Acronym",required:""},null,512),[[o.Jo,D.hospital_acronym]])]),(0,r.Lk)("div",H,[C,(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>D.hospital_district=e),id:"hospital_district",class:"text-white bg-orange-700 hover:bg-orange-800 focus:ring-4 focus:outline-none focus:ring-orange-300 w-full font-small rounded-lg text-sm py-2.5 text-center inline-flex items-center dark:bg-orange-600 dark:hover:bg-orange-700 dark:focus:ring-orange-800"},S,512),[[o.u1,D.hospital_district]])]),(0,r.Lk)("div",M,[U,(0,r.bo)((0,r.Lk)("select",{onChange:t[4]||(t[4]=(...t)=>e.handleCity&&e.handleCity(...t)),id:"Province","onUpdate:modelValue":t[5]||(t[5]=e=>D.provinceto=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},E,544),[[o.u1,D.provinceto]])]),(0,r.Lk)("div",I,[V,(0,r.bo)((0,r.Lk)("select",{onChange:t[6]||(t[6]=(...e)=>F.handleBarangay&&F.handleBarangay(...e)),id:"Municipality","onUpdate:modelValue":t[7]||(t[7]=e=>D.municipality=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[z,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(D.cities,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.city_code,key:e.city_code},(0,s.v_)(e.city_name),9,j)))),128))],544),[[o.u1,D.municipality]])]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[8]||(t[8]=t=>e.selectedMunicipality=t),id:"SelectedMunicipality",readonly:""},null,512),[[o.Jo,e.selectedMunicipality]]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[9]||(t[9]=t=>e.selectedBarangay=t),id:"SelectedBarangay",readonly:""},null,512),[[o.Jo,e.selectedBarangay]]),(0,r.Lk)("div",q,[P,(0,r.bo)((0,r.Lk)("select",{id:"Barangay","onUpdate:modelValue":t[10]||(t[10]=e=>D.barangay=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[K,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(D.barangays,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.brgy_code,key:e.brgy_code},(0,s.v_)(e.brgy_name),9,T)))),128))],512),[[o.u1,D.barangay]])]),W],32)])])])],64)}var J=a(89641),N=a(11595),G=a(88841),O=a(39658),R=a(43643),Q=a(55997),Y=a(89029),Z=a.n(Y),ee=a(27411);const te=(0,ee.dj)();var ae={data(){return{items:[],logoImages:[],previewedImage:{},provinces:[],cities:[],barangays:[],provinceto:"1752",municipality:null,barangay:null,province:"Oriental Mindoro",hospital_name:"",hospital_acronym:"",hospital_address:"",hospital_district:""}},components:{Side:R.A,Button:J.A,Upload:N.A,SelectPhilippinesAddress:Z()},mounted(){(0,G.Tf)({Modal:G.aF,Tooltip:G.m_}),(0,O.Tp)(),this.fetchData(),this.fetchCities()},methods:{insertHospital(){const e=new FormData;e.append("hospital_name",this.hospital_name),e.append("hospital_acronym",this.hospital_acronym);const t=`${this.province}, ${this.selectedMunicipality}, ${this.selectedBarangay}`;e.append("hospital_address",t),e.append("hospital_district",this.hospital_district),Q.A.post("/api/utility/save-hospital",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.hospital_name="",this.hospital_acronym="",this.hospital_address="",this.hospital_district="",this.province="",this.selectedMunicipality="",this.selectedBarangay="",te.success("Medical Request Successfully Sent"),this.fetchData()})).catch((e=>{console.error(e.response.data),te.error(e.response.data)}))},AddHospital(){const e=document.getElementById("AddHospital");e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),e.addEventListener("click",(function(t){t.target&&t.target.closest('[data-modal-hide="AddHospital"]')&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}))},deleteHospital(e){Q.A.delete(`/api/utility/delete-hospital/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{te.success("Hospital Deleted"),this.fetchData()})).catch((e=>{te.error("Cant Delete Active Hospital"),console.error(e.response.data)}))},ActivateHospital(e){Q.A.put(`/api/utility/active-hospital/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{te.success("Hospital Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?te.error(e.response.data.error):te.error("Can't Activate This Hospital"),console.error(e.response?e.response.data:e)}))},DeactivateHospital(e){Q.A.put(`/api/utility/deactivate-hospital/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{te.success("Hospital Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?te.error(e.response.data.error):te.error("Can't Activate This Hospital"),console.error(e.response?e.response.data:e)}))},fetchData(){Q.A.get("/api/utility/get-hospitals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data})).catch((e=>{console.error("Error fetching data:",e)}))},fetchCities(){(0,Y.cities)(this.provinceto).then((e=>{e&&e.length>0?(this.cities=e,this.municipality=null,this.handleBarangay()):console.error("Empty response received for cities.")})).catch((e=>{console.error("Error fetching cities:",e)}))},handleBarangay(){this.municipality&&(0,Y.barangays)(this.municipality).then((e=>{this.barangays=e,this.selectedMunicipality=this.cities.find((e=>e.city_code===this.municipality))?.city_name||"",this.selectedBarangay=this.barangays.length>0?this.barangays[0].brgy_name:""})).catch((e=>{console.error("Error fetching barangays:",e)}))}},computed:{},watch:{barangay(e){const t=this.barangays.find((t=>t.brgy_code===e));this.selectedBarangay=t?t.brgy_name:""}}},re=a(71241);const se=(0,re.A)(ae,[["render",X]]);var oe=se}}]);
//# sourceMappingURL=51.d3fcfb2e.js.map