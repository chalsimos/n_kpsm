"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[423],{91479:function(e,t,a){a.r(t),a.d(t,{default:function(){return Me}});var r=a(56768),o=a(24232),s=a(45130),l=a(67202);const n={class:"flex flex-col min-h-screen"},d={class:"flex-grow p-4 mt-[5vh]"},c={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14 w-full"},i={class:"md:flex"},u={class:"flex-column space-y space-y-4 text-sm font-medium text-gray-500 dark:text-gray-400 md:me-4 mb-4 md:mb-0"},p=(0,r.Lk)("img",{src:l,class:"h-8 me-3",alt:"KPSM Logo"},null,-1),h=(0,r.Lk)("img",{src:l,class:"h-8 me-3",alt:"KPSM Logo"},null,-1),g={id:"TupadSlotContent",class:"p-6 bg-gray-50 text-medium text-gray-500 dark:text-gray-400 dark:bg-gray-800 rounded-lg w-full md:w-[86vw] md:h-[70vh]"},b={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},k={class:"bg-orange-100 text-orange-600 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400"},v={class:"p-2 border-2 border-orange-200 border-solid rounded-lg dark:border-gray-700 mt-5"},m=(0,r.Lk)("img",{src:l,class:"h-8 me-3",alt:"KPSM Logo"},null,-1),x=(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Slot Number"),(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Slot Code"),(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Slot Available At"),(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Slot Status")],-1),f={class:"h-[7vh]"},w={class:"whitespace-nowrap text-center"},y={class:"whitespace-nowrap text-center"},L={class:"whitespace-nowrap text-center"},I={class:"whitespace-nowrap text-center"},T={id:"TupadInvitesContent",class:"p-6 bg-gray-50 text-medium text-gray-500 dark:text-gray-400 dark:bg-gray-800 rounded-lg w-full md:w-[86vw] md:h-[70vh]"},_={class:"flex"},A={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},C={class:"cursor-pointer whitespace-nowrap bg-orange-100 text-orange-600 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400"},S={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},F={class:"cursor-pointer whitespace-nowrap bg-orange-100 text-orange-600 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400"},D={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},M={class:"cursor-pointer whitespace-nowrap bg-orange-100 text-orange-600 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400"},E={class:"p-2 border-2 border-orange-200 border-solid rounded-lg dark:border-gray-700 mt-5"},R=(0,r.Lk)("img",{src:l,class:"h-8 me-3",alt:"KPSM Logo"},null,-1),B={class:"text-center whitespace-nowrap"},N={class:"text-center"},q=["checked"],$=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Fullname",-1),G=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Age & Birthday",-1),W=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Gender",-1),j=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Address",-1),z=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Civil Status",-1),K=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Contact Number",-1),P=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Benificiary Name",-1),V=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Id & Id Number",-1),U=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Used Code",-1),H=(0,r.Lk)("th",{class:"text-center whitespace-nowrap"},"Status",-1),X=(0,r.Lk)("th",{class:"text-center whitespace-nowrap action-column"},"Action",-1),J={class:"h-[2vh]"},O={class:"whitespace-nowrap uppercase text-center"},Q=["onChange","checked"],Y={class:"whitespace-nowrap text-center"},Z={class:"whitespace-nowrap text-center"},ee={class:"whitespace-nowrap text-center"},te={class:"whitespace-nowrap text-center"},ae={class:"whitespace-nowrap text-center"},re={class:"whitespace-nowrap text-center"},oe={class:"whitespace-nowrap text-center"},se={class:"whitespace-nowrap text-center"},le={class:"whitespace-nowrap text-center"},ne={class:"whitespace-nowrap text-center"},de={class:"whitespace-nowrap text-center action-column"},ce=["onClick"],ie=["onClick"],ue={id:"declineModal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},pe={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},he={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},ge=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Decline Tupad Request </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="declineModal"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),be=(0,r.Lk)("label",{for:"Reason",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Decline Reason",-1),ke=(0,r.Lk)("input",{type:"text",id:"Reason","aria-describedby":"helper-text-explanation",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"eg. 1000"},null,-1),ve=(0,r.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,r.Lk)("button",{"data-modal-hide":"declineModal",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Approved")],-1),me=[be,ke,ve];function xe(e,t,a,l,be,ke){const ve=(0,r.g2)("Head"),xe=(0,r.g2)("Flex"),fe=(0,r.g2)("Button"),we=(0,r.g2)("v-spacer"),ye=(0,r.g2)("v-text-field"),Le=(0,r.g2)("v-card-title"),Ie=(0,r.g2)("v-divider"),Te=(0,r.g2)("v-data-table"),_e=(0,r.g2)("v-card"),Ae=(0,r.g2)("Tooltip"),Ce=(0,r.g2)("Foot");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",n,[(0,r.bF)(ve),(0,r.Lk)("div",d,[(0,r.Lk)("div",c,[(0,r.Lk)("div",i,[(0,r.Lk)("ul",u,[(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:(0,o.C4)(["whitespace-nowrap inline-flex items-center px-4 py-3 rounded-lg hover:text-gray-900 w-full dark:hover:text-white",{"bg-blue-700 text-white":"TupadSlot"===be.activeTab,"bg-gray-50":"TupadSlot"!==be.activeTab,"dark:bg-blue-600":"TupadSlot"===be.activeTab,"dark:bg-gray-800":"TupadSlot"!==be.activeTab}]),onClick:t[0]||(t[0]=e=>ke.toggleTab("TupadSlot"))},[p,(0,r.eW)(" Tupad Slot ")],2)]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{href:"#",class:(0,o.C4)(["whitespace-nowrap inline-flex items-center px-4 py-3 rounded-lg hover:text-gray-900 w-full dark:hover:text-white",{"bg-blue-700 text-white":"TupadInvites"===be.activeTab,"bg-gray-50":"TupadInvites"!==be.activeTab,"dark:bg-blue-600":"TupadInvites"===be.activeTab,"dark:bg-gray-800":"TupadInvites"!==be.activeTab}]),onClick:t[1]||(t[1]=e=>ke.toggleTab("TupadInvites"))},[h,(0,r.eW)(" Tupad Invites ")],2)])]),(0,r.bo)((0,r.Lk)("div",g,[(0,r.Lk)("h2",b,[(0,r.eW)(" New Tupad Slot Available: "),(0,r.Lk)("span",k,(0,o.v_)(be.totalNoCodeSlots),1),(0,r.bo)((0,r.bF)(xe,{gap:"small",wrap:"wrap"},null,512),[[s.aG,0!==be.totalNoCodeSlots]]),(0,r.bo)((0,r.bF)(fe,{onClick:ke.generateCodes,class:"bg-orange-400 hover:bg-orange-600 text-white border border-orange-900"},{default:(0,r.k6)((()=>[(0,r.eW)("Generate "+(0,o.v_)(be.totalNoCodeSlots)+" Code",1)])),_:1},8,["onClick"]),[[s.aG,0!==be.totalNoCodeSlots]])]),(0,r.Lk)("div",v,[(0,r.bF)(_e,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(Le,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,r.k6)((()=>[m,(0,r.eW)("  Manage Tupad Slot "),(0,r.bF)(we),(0,r.bF)(ye,{modelValue:be.search,"onUpdate:modelValue":t[2]||(t[2]=e=>be.search=e),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"])])),_:1}),(0,r.bF)(Ie),(0,r.bF)(Te,{search:be.search,"onUpdate:search":t[3]||(t[3]=e=>be.search=e),items:be.items,"items-per-page":5},{headers:(0,r.k6)((({headers:e})=>[x])),item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",f,[(0,r.Lk)("td",w,(0,o.v_)(e.id),1),(0,r.Lk)("td",y,(0,o.v_)(e.code_generated),1),(0,r.Lk)("td",L,(0,o.v_)(e.month_year_available),1),(0,r.Lk)("td",I,(0,o.v_)(e.status),1)])])),_:1},8,["search","items"])])),_:1})])],512),[[s.aG,"TupadSlot"===be.activeTab]]),(0,r.bo)((0,r.Lk)("div",T,[(0,r.Lk)("div",_,[(0,r.Lk)("h2",A,[(0,r.eW)(" Total Invited: "),(0,r.bF)(Ae,{title:"Total Invited",color:"volcano",key:"volcano"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",C,(0,o.v_)(be.totalInvites),1)])),_:1})]),(0,r.Lk)("h2",S,[(0,r.eW)(" Total Accepted: "),(0,r.bF)(Ae,{title:"Total Accepted",color:"volcano",key:"volcano"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",F,(0,o.v_)(be.totalAccepted),1)])),_:1})]),(0,r.Lk)("h2",D,[(0,r.eW)(" Total Declined: "),(0,r.bF)(Ae,{title:"Total Decline",color:"volcano",key:"volcano"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",M,(0,o.v_)(be.totalDeclined),1)])),_:1})])]),(0,r.Lk)("div",E,[(0,r.bF)(_e,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(Le,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,r.k6)((()=>[R,(0,r.eW)("  Manage Tupad Invites "),(0,r.bF)(we),(0,r.bF)(ye,{modelValue:be.searchTupadInvites,"onUpdate:modelValue":t[4]||(t[4]=e=>be.searchTupadInvites=e),density:"compact",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"solo-filled",flat:"","hide-details":"","single-line":""},null,8,["modelValue"])])),_:1}),(0,r.bF)(Ie),(0,r.bF)(Te,{search:be.searchTupadInvites,"onUpdate:search":t[6]||(t[6]=e=>be.searchTupadInvites=e),items:be.tupad_invites,"items-per-page":5},{headers:(0,r.k6)((({headers:e})=>[(0,r.Lk)("tr",B,[(0,r.Lk)("th",N,[(0,r.Lk)("input",{onChange:t[5]||(t[5]=(...e)=>ke.checkAllForInvite&&ke.checkAllForInvite(...e)),checked:ke.isCheckedAllForInvite,id:"check-all-for-Invite",type:"checkbox",value:"",class:"w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,q)]),$,G,W,j,z,K,P,V,U,H,X])])),item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",J,[(0,r.Lk)("td",O,[(0,r.Lk)("input",{onChange:t=>ke.toggleCheckedForInvite(e.id),checked:be.tupadInvite.includes(e.id),id:"single-check",type:"checkbox",value:"",class:"single-check w-4 h-4 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500 dark:focus:ring-orange-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,Q)]),(0,r.Lk)("td",Y,(0,o.v_)(e.firstname)+" "+(0,o.v_)(e.middlename)+" "+(0,o.v_)(e.lastname),1),(0,r.Lk)("td",Z,(0,o.v_)(e.age)+"years old, "+(0,o.v_)(e.birthday),1),(0,r.Lk)("td",ee,(0,o.v_)(e.gender),1),(0,r.Lk)("td",te,(0,o.v_)(e.province)+","+(0,o.v_)(e.municipality)+","+(0,o.v_)(e.barangay)+","+(0,o.v_)(e.sitio),1),(0,r.Lk)("td",ae,(0,o.v_)(e.civil_status),1),(0,r.Lk)("td",re,(0,o.v_)(e.contact_number),1),(0,r.Lk)("td",oe,(0,o.v_)(e.benificiary_name),1),(0,r.Lk)("td",se,"("+(0,o.v_)(e.id_type)+") "+(0,o.v_)(e.id_number),1),(0,r.Lk)("td",le,(0,o.v_)(e.code_generated),1),(0,r.Lk)("td",ne,(0,o.v_)(e.status),1),(0,r.Lk)("td",de,[(0,r.bo)((0,r.Lk)("button",{onClick:t=>ke.AcceptRequest(be.tupadInvite.length>0?be.tupadInvite:e.id),class:"block mt-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button"}," Accept ",8,ce),[[s.aG,"pending"===e.status]]),(0,r.bo)((0,r.Lk)("button",{onClick:t=>ke.DeclineModal(be.tupadInvite.length>0?be.tupadInvite:e.id),class:"block mb-2 text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm mt-1 px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",type:"button"}," Decline ",8,ie),[[s.aG,"pending"===e.status]])])])])),_:1},8,["search","items"])])),_:1})])],512),[[s.aG,"TupadInvites"===be.activeTab]])])])]),(0,r.Lk)("div",null,[(0,r.bF)(Ce)])]),(0,r.Lk)("div",ue,[(0,r.Lk)("div",pe,[(0,r.Lk)("div",he,[ge,(0,r.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>ke.DeclineRequest&&ke.DeclineRequest(...e)),["prevent"])),class:"max-w-sm mx-auto mt-5 mb-5 ml-10"},me,32)])])])],64)}a(44114);var fe=a(89641),we=a(74789),ye=a(35678),Le=a(39658),Ie=a(80608),Te=a(27411),_e=a(80259),Ae=a(55997);const Ce=(0,Te.dj)();var Se={components:{Head:Ie.A,Foot:_e.A,Button:fe.A,Flex:we.A,Tooltip:ye.A},data(){return{activeTab:"TupadSlot",search:"",searchTupadInvites:"",totalNoCodeSlots:"",totalInvites:"",totalAccepted:"",totalDeclined:"",items:[],tupad_invites:[],tupadInvite:[]}},mounted(){(0,Le.Tp)(),this.fetchTupadCode(),this.fetchTupadSlot(),this.fetchTupadInvites()},methods:{toggleTab(e){this.activeTab=e},AcceptRequest(e){Array.isArray(e)?e.forEach((e=>{this.acceptApplication(e)})):this.acceptApplication(e)},acceptApplication(e){Ae.A.put(`/api/dole/accept-tupad-request/${e}`,null,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Ce.success("Request Accepted"),this.fetchTupadInvites(),this.checkedIds=[]})).catch((e=>{console.error(e.response.data)}))},DeclineModal(e){this.itemId=e;const t=document.getElementById("declineModal");t.classList.remove("hidden"),t.setAttribute("aria-hidden","false"),t.addEventListener("click",(function(e){e.target&&e.target.closest('[data-modal-hide="declineModal"]')&&(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"))}))},DeclineRequest(){const e=this.itemId;e instanceof Event?console.error("Invalid itemId:",e):Array.isArray(e)?e.forEach((e=>{this.sendDeclineRequest(e)})):this.sendDeclineRequest(e)},sendDeclineRequest(){const e=this.itemId,t=document.getElementById("Reason").value;Ae.A.put(`/api/dole/decline-tupad-request/${e}`,{decline_reason:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Ce.success("Request Decline"),this.fetchTupadInvites(),this.checkedIds=[]})).catch((e=>{console.error(e.response.data)}))},fetchTupadInvites(){Ae.A.get("/api/dole/captain-tupad-invited",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.tupad_invites=e.data.data,this.totalInvites=this.calculatetotalInvites(this.tupad_invites),this.totalAccepted=this.calculatetotalAccepted(this.tupad_invites),this.totalDeclined=this.calculatetotalDeclined(this.tupad_invites)})).catch((e=>{console.error("Error fetching tupad slot:",e)}))},calculatetotalAccepted(e){let t=0;return e.forEach((e=>{"accepted"===e.status&&t++})),t},calculatetotalDeclined(e){let t=0;return e.forEach((e=>{"declined"===e.status&&t++})),t},calculatetotalInvites(e){let t=0;return e.forEach((e=>{""!==e.use_code_id&&t++})),t},fetchTupadCode(){Ae.A.get("/api/dole/tupad-code-list",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data.data})).catch((e=>{console.error("Error fetching tupad slot:",e)}))},fetchTupadSlot(){Ae.A.get("/api/dole/captain-slot-list",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.slots=e.data.data,this.totalNoCodeSlots=this.calculateTotalNoCodeSlots(this.slots)})).catch((e=>{console.error("Error fetching tupad slot:",e)}))},calculateTotalNoCodeSlots(e){let t=0;return e.forEach((e=>{"No Code"===e.status&&(t+=e.slot_get)})),t},generateCodes(){Ae.A.post("/api/dole/generate-code",{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Ce.success("Generated Code Successfully!"),this.fetchTupadCode(),this.fetchTupadSlot()})).catch((e=>{console.error("Error generating codes:",e)}))},checkAllForInvite(e){const t=e.target.checked;this.tupadInvite=t?this.tupad_invites.map((e=>e.id)):[],this.$nextTick((()=>{document.getElementById("check-all-for-Invite").checked=t})),console.log("Checked IDs For Invite:",this.tupadInvite)},toggleCheckedForInvite(e){this.tupadInvite.includes(e)?this.tupadInvite=this.tupadInvite.filter((t=>t!==e)):this.tupadInvite.push(e),console.log("Checked IDs For Invite:",this.tupadInvite)}},watch:{},computed:{isCheckedAllForInvite(){return this.tupadInvite.length===this.tupad_invites.length&&this.tupadInvite.length>0}}},Fe=a(71241);const De=(0,Fe.A)(Se,[["render",xe]]);var Me=De},2325:function(e,t,a){e.exports=a.p+"img/kpms.03052075.png"},67202:function(e,t,a){e.exports=a.p+"img/tupad.e45bef16.jpg"}}]);
//# sourceMappingURL=423.d8fd96d5.js.map