"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[428],{64428:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var i=a(56768);const s={class:"p-4 sm:ml-64"},r={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},l={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-4"},n={class:"flex items-center justify-center w-full h-full"},o={class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"},c={class:"flex items-center justify-center w-full h-full"},d={class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"},u={class:"flex items-center justify-center w-full h-full"},f={class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"},h={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-4"},p={class:"flex items-center justify-center w-full h-full"},g={class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"},v=(0,i.Lk)("div",{class:"flex items-center justify-center w-full h-full"},[(0,i.Lk)("div",{class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"})],-1),y=(0,i.Lk)("div",{class:"flex items-center justify-center w-full h-full"},[(0,i.Lk)("div",{class:"w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"})],-1),m=(0,i.Fv)('<div class="grid grid-cols-2 gap-4 mb-4"><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div></div><div class="flex items-center justify-center h-[50vh] mb-4 rounded bg-gray-50 dark:bg-gray-800"></div><div class="grid grid-cols-2 gap-4"><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div><div class="flex items-center justify-center w-full h-full"><div class="w-full h-[50vh] py-20 bg-gray-50 dark:bg-gray-800 rounded"></div></div></div>',3);function b(t,e,a,b,x,w){const _=(0,i.g2)("Side"),k=(0,i.g2)("apexchart");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(_),(0,i.Lk)("div",s,[(0,i.Lk)("div",r,[(0,i.Lk)("div",l,[(0,i.Lk)("div",n,[(0,i.Lk)("div",o,[(0,i.bF)(k,{type:"bar",options:x.hospital_options,series:x.hospital_count},null,8,["options","series"])])]),(0,i.Lk)("div",c,[(0,i.Lk)("div",d,[(0,i.bF)(k,{type:"bar",options:x.hospital_offer,series:x.offer_count},null,8,["options","series"])])]),(0,i.Lk)("div",u,[(0,i.Lk)("div",f,[(0,i.bF)(k,{type:"bar",options:x.barangay_per_municipality,series:x.municipality_count},null,8,["options","series"])])])]),(0,i.Lk)("div",h,[(0,i.Lk)("div",p,[(0,i.Lk)("div",g,[(0,i.bF)(k,{type:"pie",options:x.genderOptions,series:x.genderSeries},null,8,["options","series"])])]),v,y]),m])])],64)}a(44114);var x=a(82721),w=a(39658),_=a(43643),k=a(2325);const C={class:"bg-white bottom-0 left-0 w-[80vw] m-0 ml-[8vw] xs:ml-[2vw] xs:w-[100vw] md:ml-[35vw] md:w-[64vw] lg:ml-[19vw] lg:w-[78vw]"},O=(0,i.Fv)('<div class="w-full max-w-screen-xl mx-auto p-10 md:py-8"><div class="sm:flex sm:items-center sm:justify-between"><a href="/" class="flex items-center mb-4 sm:mb-0 space-x-3 rtl:space-x-reverse"><img src="'+k+'" class="h-8" alt="Flowbite Logo"><span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white hover:text-orange-500">KPSM</span></a><ul class="flex flex-wrap items-center mb-6 text-sm font-medium text-gray-500 sm:mb-0 dark:text-gray-400"><li><a href="#" class="hover:text-orange-500 me-4 md:me-6 cursor-help">About</a></li><li><a href="#" class="hover:text-orange-500 me-4 md:me-6 cursor-help">Privacy Policy</a></li><li><a href="#" class="hover:text-orange-500 me-4 md:me-6 cursor-help">Licensing</a></li><li><a href="#" class="hover:text-orange-500 me-4 md:me-6 cursor-help">Contact</a></li></ul></div><hr class="my-4 border-orange-200 sm:mx-auto dark:border-gray-700 lg:my-8"><span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400 hover:text-orange-500 cursor-pointer">© 2024 <a href="/" class="hover:text-orange-500">KPSM™</a>. All Rights Reserved.</span></div>',1),A=[O];function L(t,e){return(0,i.uX)(),(0,i.CE)("footer",C,A)}var j=a(71241);const S={},H=(0,j.A)(S,[["render",L]]);var M=H,$=a(91758),I=a(55997),P=(a(89029),{components:{Side:_.A,Foot:M,Tag:x.Ay,apexchart:$.A},data(){return{hospital_count:[],data:null,hospital_options:{chart:{type:"bar",height:"100%",width:"100%",toolbar:{show:!0}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:["Total Hospitals","Active Hospitals","Inactive Hospitals"]},title:{text:"Hospital Counts",align:"left"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:a,w:i})=>{const s=["total","active","inactive"],r=s[a],l=t[e][a];let n=[];this.data&&this.data[r]&&this.data[r].names&&(n=this.data[r].names);const o=n.join("<br>");return`\n                        <div class="p-4 bg-orange-300">\n                                <div class="font-bold text-lg mb-2">${l} ${r.charAt(0).toUpperCase()+r.slice(1)} Hospitals:</div>\n                                <div class="space-y-1">${o}</div>\n                            </div>\n                        `}}},offer_count:[],hospital_offer:{chart:{type:"bar",height:"100%",width:"100%",toolbar:{show:!0},id:"hospital_offer"},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},title:{text:"Hospital Service Offers",align:"left"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:a,w:i})=>{if(!this.offer_data)return"";const s=this.offer_data.hospitals[a],r=s.active_offers.join("<br>"),l=s.inactive_offers.join("<br>");return`\n                            <div class="p-4 bg-orange-300">\n                                <div class="font-bold text-lg mb-2">${s.hospital_name}</div>\n                                <div class="grid grid-cols-2 gap-4">\n                                    <div>\n                                        <div class="font-bold">Active Offers:</div>\n                                        <div>${r}</div>\n                                    </div>\n                                    <div class="bg-red-600 py-2 px-5">\n                                        <div class="font-bold ">Inactive Offers:</div>\n                                        <div>${l}</div>\n                                    </div>\n                                </div>\n                            </div>\n                        `}}},offer_data:null,barangay_per_municipality:{chart:{type:"bar",height:"100%",width:"100%",toolbar:{show:!0},id:"barangay_per_municipality"},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:[]},title:{text:"Patient per Municipality and Barangay",align:"left"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:a,w:i})=>{const s=this.municipality_count[a];if(!s||!s.barangays||0===s.barangays.length)return"";const r=s.municipality,l=s.barangays;let n=`<div class="font-bold text-lg mb-2">Barangay in ${r}</div>`;return l.forEach((({barangay:t,count:e})=>{n+=`<div>${t}: ${e}</div>`})),`<div class="p-4 bg-orange-300">${n}</div>`}}},municipality_count:[],detailedMunicipalityData:{},genderOptions:{chart:{type:"pie",height:"100%",width:"100%",toolbar:{show:!0},id:"genderOptions"},dataLabels:{enabled:!0,formatter:(t,e)=>{const a=e.seriesIndex,i=this.detailedMunicipalityData,s=e.w.config.labels&&e.w.config.labels[a];if(s&&i&&i[s]){const t=i[s].count,e=Object.values(i).reduce(((t,e)=>t+e.count),0),a=t/e*100;return s+": "+a.toFixed(2)+"%"}return""},textAnchor:"middle",offsetX:0,offsetY:0,style:{fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",colors:["#ffffff"]}},plotOptions:{pie:{customScale:1,offsetY:10,dataLabels:{offset:-20}}},labels:[],title:{text:"Patients Gender per Municipality",align:"left"},tooltip:{custom:({series:t,seriesIndex:e,dataPointIndex:a,w:i})=>{const s=this.detailedMunicipalityData;if(!s)return"";const r=i.config.labels[e],l=s[r];let n='<div class="p-4 bg-orange-300">';return n+=`<div class="font-bold text-lg mb-2">${r}</div>`,l&&l.municipality?Object.entries(l.municipality).forEach((([t,e])=>{n+=`<div>${t}: ${e}</div>`})):n+="<div>Municipality data unavailable</div>",n+="</div>",n}}},genderSeries:[]}},mounted(){(0,w.Tp)(),this.fetchGenderMedicalRequests(),this.fetchMunicipalityBarangay(),this.fetchHospitalCounts(),this.fetchServiceOfferCounts()},methods:{fetchGenderMedicalRequests(){I.A.get("/api/dashboard/gender-medical-requests").then((t=>{const e=t.data;this.genderProcessData(e)})).catch((t=>{console.error(t)}))},genderProcessData(t){const e=[],a=[];this.detailedMunicipalityData={};for(const[i,s]of Object.entries(t))e.push(i),a.push(s.count),this.detailedMunicipalityData[i]={count:s.count,municipality:s.municipality};this.genderOptions.labels=e,this.genderSeries=a,ApexCharts.exec("genderOptions","updateOptions",{labels:e})},fetchMunicipalityBarangay(){I.A.get("/api/dashboard/municipality-barangay").then((t=>{const e=t.data;this.processData(e)})).catch((t=>{console.error(t)}))},processData(t){const e=[],a=[],i=[];t.forEach((t=>{let s=0;const r=t.barangays||[];r.forEach((e=>{s+=e.count,i.push({municipality:t.municipality,barangay:e.barangay,count:e.count})})),s>0&&(e.push(t.municipality),a.push(s),this.municipality_count.push({municipality:t.municipality,totalCount:s,barangays:r}))})),e.length>0&&a.length>0?this.municipality_count=this.municipality_count:this.municipality_count=[],e.length>0&&(this.barangay_per_municipality.xaxis.categories=e,this.barangay_per_municipality.series=[{name:"Total Count",data:a}]),ApexCharts.exec("barangay_per_municipality","updateOptions",{xaxis:{categories:e},series:[{name:"Total Count",data:a}]})},fetchHospitalCounts(){I.A.get("/api/dashboard/get-hospital-count",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((t=>{this.data=t.data,this.updateHospitalCountChart()})).catch((t=>{console.error("Error fetching medical requests:",t)}))},updateHospitalCountChart(){this.data&&(this.hospital_count=[{name:"Hospitals",data:[this.data.total.count,this.data.active.count,this.data.inactive.count]}],this.hospital_options.xaxis.categories=["Total Hospitals","Active Hospitals","Inactive Hospitals"])},fetchServiceOfferCounts(){I.A.get("/api/dashboard/get-hospital-service-offer-count",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((t=>{this.offer_data=t.data,this.updateHospitalServiceOfferCountChart()})).catch((t=>{console.error("Error fetching Service Offer requests:",t)}))},updateHospitalServiceOfferCountChart(){if(!this.offer_data)return;this.offer_data.hospitals.map((t=>t.hospital_name));const t=this.offer_data.hospitals.map((t=>t.hospital_acronym)),e=this.offer_data.hospitals.map((t=>({active:t.active_offers.length,inactive:t.inactive_offers.length})));this.offer_count=[{name:"Active Offers",data:e.map((t=>t.active))},{}],this.hospital_offer.xaxis.categories=t,ApexCharts.exec("hospital_offer","updateOptions",{xaxis:{categories:t},series:this.offer_count})}}});const F=(0,j.A)(P,[["render",b]]);var D=F},2325:function(t,e,a){t.exports=a.p+"img/kpms.03052075.png"}}]);
//# sourceMappingURL=428.f2e06d30.js.map