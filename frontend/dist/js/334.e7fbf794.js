"use strict";(self["webpackChunkKPSM"]=self["webpackChunkKPSM"]||[]).push([[334],{86334:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var r=a(56768),o=a(24232),s=a(45130);const i={class:"p-4 sm:ml-64"},l={class:"p-4 border-2 border-gray-200 border-dashed rounded-lg dark:border-gray-700 mt-14"},d=(0,r.Lk)("tr",{class:"text-center whitespace-nowrap"},[(0,r.Lk)("th",{class:"text-center"},"Hospital Name"),(0,r.Lk)("th",{class:"text-center"},"Acronym"),(0,r.Lk)("th",{class:"text-center"},"Status"),(0,r.Lk)("th",{class:"text-center"},"Address"),(0,r.Lk)("th",{class:"text-center"},"Action")],-1),n={class:"h-[5vh] text-center",elevation:"2"},c={class:"whitespace-nowrap uppercase"},p={class:"whitespace-nowrap uppercase"},g={class:"whitespace-nowrap uppercase"},h={class:"whitespace-nowrap uppercase"},u={class:"whitespace-nowrap uppercase"},b={class:"mb-1 mt-1"},y={class:"mb-1"},m={class:"mb-1"},k={id:"AddHospital",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-screen md:inset-0"},f={class:"relative p-4 sm:px-6 sm:py-8 lg:px-8 lg:py-10 w-full max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-full"},v={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},x=(0,r.Fv)('<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"><h3 class="text-xl font-semibold text-gray-900 dark:text-white"> Add New Logo </h3><button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="AddHospital"><svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg><span class="sr-only">Close modal</span></button></div>',1),w={class:"mb-5"},_=(0,r.Lk)("label",{for:"hospital_name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Hospital Name",-1),L={class:"mb-5"},A=(0,r.Lk)("label",{for:"hospital_acronym",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Acronym",-1),C={class:"mb-5"},H=(0,r.Lk)("label",{for:"hospital_district",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Hospital District",-1),B={class:"mb-5"},F=(0,r.Lk)("label",{for:"Province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Province",-1),S=(0,r.Lk)("option",{value:"1752"},"Oriental Mindoro",-1),M=[S],D={class:"mb-5"},U=(0,r.Lk)("label",{for:"Municipality",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Municipality",-1),$=(0,r.Lk)("option",{disabled:"",selected:"",value:""},"Select City",-1),E=["value"],I={class:"mb-5"},V=(0,r.Lk)("label",{for:"Barangay",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Barangay",-1),q=(0,r.Lk)("option",{disabled:""},"Select Barangay",-1),z=["value"],j=(0,r.Lk)("div",{class:"flex justify-end p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600"},[(0,r.Lk)("button",{"data-modal-hide":"AddHospital",type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Add Logo")],-1);function P(e,t,a,S,P,J){const K=(0,r.g2)("Side"),T=(0,r.g2)("v-icon"),W=(0,r.g2)("v-spacer"),X=(0,r.g2)("Button"),N=(0,r.g2)("v-card-title"),G=(0,r.g2)("v-divider"),O=(0,r.g2)("v-chip"),R=(0,r.g2)("v-data-table"),Q=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(K),(0,r.Lk)("div",i,[(0,r.Lk)("div",l,[(0,r.bF)(Q,{class:"bg-orange-200",flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(N,{class:"d-flex align-center pe-2 bg-orange-200"},{default:(0,r.k6)((()=>[(0,r.bF)(T,{icon:"mdi-hospital-box-outline"}),(0,r.eW)(" Â  "),(0,r.bF)(W),(0,r.bF)(X,{type:"primary",onClick:J.AddHospital,style:{"background-color":"#ffd666"}},{default:(0,r.k6)((()=>[(0,r.eW)(" Add Hospital ")])),_:1},8,["onClick"])])),_:1}),(0,r.bF)(G),(0,r.bF)(R,{search:e.search,"onUpdate:search":t[0]||(t[0]=t=>e.search=t),items:P.items,"items-per-page":5},{headers:(0,r.k6)((({headers:e})=>[d])),item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",n,[(0,r.Lk)("td",c,(0,o.v_)(e.hospital_name),1),(0,r.Lk)("td",p,(0,o.v_)(e.hospital_acronym),1),(0,r.Lk)("td",g,[(0,r.bF)(O,{color:"active"===e.status?"green":"red",text:"active"===e.status?"Active":"Inactive",class:"text-uppercase",size:"small",label:""},null,8,["color","text"])]),(0,r.Lk)("td",h,(0,o.v_)(e.hospital_address),1),(0,r.Lk)("td",u,[(0,r.Lk)("div",b,[(0,r.bo)((0,r.bF)(X,{type:"primary",class:"px-5",danger:"",onClick:t=>J.deleteHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Delete ")])),_:2},1032,["onClick"]),[[s.aG,"inactive"===e.status]])]),(0,r.Lk)("div",y,[(0,r.bo)((0,r.bF)(X,{type:"primary",primary:"",onClick:t=>J.ActivateHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Activate ")])),_:2},1032,["onClick"]),[[s.aG,"inactive"===e.status]])]),(0,r.Lk)("div",m,[(0,r.bo)((0,r.bF)(X,{onClick:t=>J.DeactivateHospital(e.id)},{default:(0,r.k6)((()=>[(0,r.eW)(" Deactivate ")])),_:2},1032,["onClick"]),[[s.aG,"active"===e.status]])])])])])),_:1},8,["search","items"])])),_:1})])]),(0,r.Lk)("div",k,[(0,r.Lk)("div",f,[(0,r.Lk)("div",v,[x,(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>J.insertHospital&&J.insertHospital(...e)),["prevent"])),class:"w-full px-4 py-6 sm:px-6 sm:py-8 lg:px-8 lg:py-10"},[(0,r.Lk)("div",w,[_,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>P.hospital_name=e),type:"text",id:"hospital_name",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Hospital Name",required:""},null,512),[[s.Jo,P.hospital_name]])]),(0,r.Lk)("div",L,[A,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>P.hospital_acronym=e),type:"text",id:"hospital_acronym",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"Acronym",required:""},null,512),[[s.Jo,P.hospital_acronym]])]),(0,r.Lk)("div",C,[H,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>P.hospital_district=e),type:"text",id:"hospital_district",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",placeholder:"District",required:""},null,512),[[s.Jo,P.hospital_district]])]),(0,r.Lk)("div",B,[F,(0,r.bo)((0,r.Lk)("select",{onChange:t[4]||(t[4]=(...t)=>e.handleCity&&e.handleCity(...t)),id:"Province","onUpdate:modelValue":t[5]||(t[5]=e=>P.provinceto=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},M,544),[[s.u1,P.provinceto]])]),(0,r.Lk)("div",D,[U,(0,r.bo)((0,r.Lk)("select",{onChange:t[6]||(t[6]=(...e)=>J.handleBarangay&&J.handleBarangay(...e)),id:"Municipality","onUpdate:modelValue":t[7]||(t[7]=e=>P.municipality=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[$,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(P.cities,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.city_code,key:e.city_code},(0,o.v_)(e.city_name),9,E)))),128))],544),[[s.u1,P.municipality]])]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[8]||(t[8]=t=>e.selectedMunicipality=t),id:"SelectedMunicipality",readonly:""},null,512),[[s.Jo,e.selectedMunicipality]]),(0,r.bo)((0,r.Lk)("input",{type:"hidden","onUpdate:modelValue":t[9]||(t[9]=t=>e.selectedBarangay=t),id:"SelectedBarangay",readonly:""},null,512),[[s.Jo,e.selectedBarangay]]),(0,r.Lk)("div",I,[V,(0,r.bo)((0,r.Lk)("select",{id:"Barangay","onUpdate:modelValue":t[10]||(t[10]=e=>P.barangay=e),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-orange-500 dark:focus:border-orange-500",required:""},[q,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(P.barangays,(e=>((0,r.uX)(),(0,r.CE)("option",{value:e.brgy_code,key:e.brgy_code},(0,o.v_)(e.brgy_name),9,z)))),128))],512),[[s.u1,P.barangay]])]),j],32)])])])],64)}var J=a(89641),K=a(11595),T=a(88841),W=a(39658),X=a(68820),N=a(55997),G=a(89029),O=a.n(G),R=a(27411);const Q=(0,R.dj)();var Y={data(){return{items:[],logoImages:[],previewedImage:{},provinces:[],cities:[],barangays:[],provinceto:"1752",municipality:null,barangay:null,province:"Oriental Mindoro",hospital_name:"",hospital_acronym:"",hospital_address:"",hospital_district:""}},components:{Side:X.A,Button:J.A,Upload:K.A,SelectPhilippinesAddress:O()},mounted(){(0,T.Tf)({Modal:T.aF,Tooltip:T.m_}),(0,W.Tp)(),this.fetchData(),this.fetchCities()},methods:{insertHospital(){const e=new FormData;e.append("hospital_name",this.hospital_name),e.append("hospital_acronym",this.hospital_acronym);const t=`${this.province}, ${this.selectedMunicipality}, ${this.selectedBarangay}`;e.append("hospital_address",t),e.append("hospital_district",this.hospital_district),N.A.post("/api/utility/save-hospital",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.hospital_name="",this.hospital_acronym="",this.hospital_address="",this.hospital_district="",this.province="",this.selectedMunicipality="",this.selectedBarangay="",Q.success("Medical Request Successfully Sent"),this.fetchData()})).catch((e=>{console.error(e.response.data),Q.error(e.response.data)}))},AddHospital(){const e=document.getElementById("AddHospital");e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),e.addEventListener("click",(function(t){t.target&&t.target.closest('[data-modal-hide="AddHospital"]')&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}))},deleteHospital(e){N.A.delete(`/api/utility/delete-hospital/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Q.success("Hospital Deleted"),this.fetchData()})).catch((e=>{Q.error("Cant Delete Active Hospital"),console.error(e.response.data)}))},ActivateHospital(e){N.A.put(`/api/utility/active-hospital/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Q.success("Hospital Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?Q.error(e.response.data.error):Q.error("Can't Activate This Hospital"),console.error(e.response?e.response.data:e)}))},DeactivateHospital(e){N.A.put(`/api/utility/deactivate-hospital/${e}`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{Q.success("Hospital Updated"),this.fetchData()})).catch((e=>{e.response&&e.response.data&&e.response.data.error?Q.error(e.response.data.error):Q.error("Can't Activate This Hospital"),console.error(e.response?e.response.data:e)}))},fetchData(){N.A.get("/api/utility/get-hospitals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.items=e.data})).catch((e=>{console.error("Error fetching data:",e)}))},fetchCities(){(0,G.cities)(this.provinceto).then((e=>{e&&e.length>0?(this.cities=e,this.municipality=null,this.handleBarangay()):console.error("Empty response received for cities.")})).catch((e=>{console.error("Error fetching cities:",e)}))},handleBarangay(){this.municipality&&(0,G.barangays)(this.municipality).then((e=>{this.barangays=e,this.selectedMunicipality=this.cities.find((e=>e.city_code===this.municipality))?.city_name||"",this.selectedBarangay=this.barangays.length>0?this.barangays[0].brgy_name:""})).catch((e=>{console.error("Error fetching barangays:",e)}))}},computed:{},watch:{barangay(e){const t=this.barangays.find((t=>t.brgy_code===e));this.selectedBarangay=t?t.brgy_name:""}}},Z=a(71241);const ee=(0,Z.A)(Y,[["render",P]]);var te=ee}}]);
//# sourceMappingURL=334.e7fbf794.js.map